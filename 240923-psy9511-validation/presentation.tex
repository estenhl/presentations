\documentclass[10pt]{beamer}

\usetheme{PSY9511}

\usepackage{pgfplots}

\usepgfplotslibrary{fillbetween}

\usetikzlibrary{arrows.meta}
\usetikzlibrary{calc}
\usetikzlibrary{patterns}

\title{PSY9511: Seminar 4}
\subtitle{Model selection, validation and testing}
\author{Esten H. Leonardsen}
\date{23.09.24}

\colorlet{cases}{red}
\colorlet{controls}{blue}

\begin{document}
	\begin{frame}
	 	\titlepage
	\end{frame}

    \begin{frame}
        \vfill
        \centering
        \begin{tikzpicture}
            \node[inner sep=0pt, draw=black] {
                \includegraphics[width=8cm]{data/unclesam.png}
            };
        \end{tikzpicture}
        \vfill
    \end{frame}

    \begin{frame}{Outline}
        \begin{enumerate}
            \item Assignment 3
            \item Loss functions and performance metrics
            \item Strategies for model evaluation
            \begin{itemize}
                \item Training and validation split
                \item (Stratification)
                \item (Leave-one-out cross-validation)
                \item Cross-validation
                \item Bootstrap
                \item Model comparison
            \end{itemize}
            \item Strategies for model selection \textbf{and} evaluation
            \begin{itemize}
                \item Train/validation/test split
                \item Nested cross-validation
            \end{itemize}
        \end{enumerate}
    \end{frame}

    \section{Assigment 3}

    \begin{frame}{Assignment 3: Performance}
        \begin{tikzpicture}
            \begin{axis}[
                height=7cm,
                width=10cm,
                xlabel={Lambda},
                ylabel={MAE}
            ]
                \addplot[red, mark=*] coordinates {
                    (0, 2.86)
                    (0.1, 2.83)
                    (0.2, 2.81)
                    (0.3, 2.79)
                    (0.4, 2.77)
                    (0.5, 2.75)
                    (0.6, 2.73)
                    (0.7, 2.71)
                    (0.8, 2.7)
                    (0.9, 2.7)
                    (1.0, 2.72)
                };
                \addlegendentry{Training}
                \addplot[blue, mark=*] coordinates {
                    (0, 2.57)
                    (0.1, 2.56)
                    (0.2, 2.55)
                    (0.3, 2.54)
                    (0.4, 2.54)
                    (0.5, 2.55)
                    (0.6, 2.56)
                    (0.7, 2.57)
                    (0.8, 2.59)
                    (0.9, 2.62)
                    (1.0, 2.65)
                };
                \addlegendentry{Validation}
            \end{axis}
        \end{tikzpicture}
    \end{frame}

    \begin{frame}{Assignment 3: Preprocessing}
        \centering
        \begin{tikzpicture}
            \node[] at (0, -6) {};
            \only<1-3>{
                \node[label=above:\footnotesize{Training}, font=\small\selectfont] (train) at (0, 0) {
                    \begin{tabular}{|c|}
                        \hline
                        \textbf{x}\\
                        \hline
                        0.0\\
                        0.2\\
                        0.4\\
                        0.6\\
                        0.8\\
                        1.0\\
                        \hline
                    \end{tabular}
                };
                \node[label=above:\footnotesize{Validation}, font=\small\selectfont] (val) at (4, 0) {
                    \begin{tabular}{|c|}
                        \hline
                        \textbf{x}\\
                        \hline
                        1.0\\
                        1.2\\
                        1.4\\
                        1.6\\
                        1.8\\
                        2.0\\
                        \hline
                    \end{tabular}
                };
            }
            \visible<2-4>{
                \node[anchor=north, font=\small\selectfont] at (train.south) {$\bar{x}=0.5$};
                \node[anchor=north, font=\small\selectfont] at (val.south) {$\bar{x}=1.5$};
            }
            \visible<3>{
                \node[text width=10cm, align=center] at (2, -3.5) {
                    In a real-life scenario we don't have a validation set, only\\individual observations
                };
            }
            \visible<4-5>{
                \node[label=above:\footnotesize{Training}, font=\small\selectfont] (train) at (0, 0) {
                    \begin{tabular}{|c|}
                        \hline
                        \textbf{x}\\
                        \hline
                        0.0\\
                        0.2\\
                        0.4\\
                        0.6\\
                        0.8\\
                        \textcolor{red}{1.0}\\
                        \hline
                    \end{tabular}
                };
                \node[label=above:\footnotesize{Validation}, font=\small\selectfont] (val) at (4, 0) {
                    \begin{tabular}{|c|}
                        \hline
                        \textbf{x}\\
                        \hline
                        \textcolor{red}{1.0}\\
                        1.2\\
                        1.4\\
                        1.6\\
                        1.8\\
                        2.0\\
                        \hline
                    \end{tabular}
                };
            }
            \only<5>{
                \node[font=\small\selectfont] (trainz) at (0, -3.75) {
                    \begin{tabular}{|c|}
                        \hline
                        \textbf{x}\\
                        \hline
                        -0.5\\
                        -0.3\\
                        -0.1\\
                        0.1\\
                        0.3\\
                        \textcolor{red}{0.5}\\
                        \hline
                    \end{tabular}
                };
                \draw[-stealth, very thick] (train) -- (trainz);
                \node[font=\small\selectfont] (valz) at (4, -3.75) {
                    \begin{tabular}{|c|}
                        \hline
                        \textbf{x}\\
                        \hline
                        \textcolor{red}{-0.5}\\
                        -0.3\\
                        -0.1\\
                        0.1\\
                        0.3\\
                        0.5\\
                        \hline
                    \end{tabular}
                };
                \draw[-stealth, very thick] (val) -- (valz);
            }

        \end{tikzpicture}
    \end{frame}

    \begin{frame}{The mortal sins of machine learning in neuroscience}
        \begin{tikzpicture}
            \node[text width=10cm, font=\small\selectfont] at (0, 0) {
                \begin{enumerate}
                    \item Reporting inflated modelling performance due to insufficient testing procedures
                    \item Using accuracy as a model performance measure when it is not appropriate
                \end{enumerate}
            };

            \visible<2>{
                \draw[-stealth, line width=5pt] (0, -1.2) -- (0, -2.4);
                \node[align=left, text width=10cm, font=\small\selectfont\bfseries] at (0.4, -3) {
                    We believe that we know things that we actually don't (e.g. what brain regions are involved in a mental disorder)
                };
            }
        \end{tikzpicture}
    \end{frame}

    \section{Loss functions and performance metrics}

    \newcommand{\autoplots}[1]{
        \begin{tikzpicture}
            \begin{axis}[
                height=5.3cm,
                width=9cm,
                xlabel={Horsepower},
                ylabel={Miles per gallon},
                xmin=41,
                xmax=236,
                ymin=6,
                ymax=49.6,
                xtick pos=bottom,
                ytick pos=left
            ]

                \ifnum#1<3
                    \addplot[
                        only marks,
                        mark=*,
                        color=blue,
                        opacity=0.1
                    ] table[
                        col sep=comma,
                        y=mpg,
                        x=horsepower
                    ] {data/Auto.csv};
                \fi
                \ifnum#1=3
                    \addplot[
                        only marks,
                        mark=*,
                        color=blue,
                        opacity=0.02
                    ] table[
                        col sep=comma,
                        y=mpg,
                        x=horsepower
                    ] {data/Auto.csv};
                    \addplot[
                        only marks,
                        mark=*,
                        color=blue,
                        opacity=0.5
                    ] coordinates {
                        (72, 22)
                        (100, 19)
                        (137, 14)
                        (198, 15)
                    };
                    \draw[densely dotted, thick]
                        (axis cs: 72, 22) --
                        (axis cs: 72, 39.936 - 72*0.158) --
                        (axis cs: 72 - 16, 39.936 - 72*0.158) --
                        (axis cs: 72 - 16, 22) -- cycle;
                    \draw[densely dotted, thick]
                        (axis cs: 100, 19) --
                        (axis cs: 100, 39.936 - 100*0.158) --
                        (axis cs: 100 - 12, 39.936 - 100*0.158) --
                        (axis cs: 100 - 12, 19) -- cycle;
                    \draw[densely dotted, thick]
                        (axis cs: 137, 14) --
                        (axis cs: 137, 39.936 - 137*0.158) --
                        (axis cs: 137 - 10, 39.936 - 137*0.158) --
                        (axis cs: 137 - 10, 14) -- cycle;
                    \draw[densely dotted, thick]
                        (axis cs: 198, 15) --
                        (axis cs: 198, 39.936 - 198*0.158) --
                        (axis cs: 198 + 14, 39.936 - 198*0.158) --
                        (axis cs: 198 + 14, 15) -- cycle;
                \fi
                \ifnum#1>3
                    \addplot[
                        only marks,
                        mark=*,
                        color=blue,
                        opacity=0.1
                    ] table[
                        col sep=comma,
                        y=mpg,
                        x=horsepower
                    ] {data/Auto.csv};
                \fi


                \ifnum#1>1
                    \addplot[
                        domain=41:236,
                        very thick,
                        red
                    ] {39.935861 - 0.157845 * x};
                    \node[anchor=north east,font=\small\selectfont,red] at (axis cs: 230, 46.6) {
                        $\hat{y}=39.936 - 0.158x$
                    };
                \fi

                \ifnum#1>3
                    \addplot[
                        domain=41:236,
                        very thick,
                        teal
                    ] {40.419 - 0.165 * x};
                    \node[anchor=north east,font=\small\selectfont,teal] at (axis cs: 230, 42) {
                        $\hat{y}=40.419 - 0.165x$
                    };
                \fi
            \end{axis}
        \end{tikzpicture}
    }

    \newsavebox{\autodata}
    \sbox{\autodata}{\autoplots{1}}
    \newsavebox{\automsemodel}
    \sbox{\automsemodel}{\autoplots{2}}
    \newsavebox{\automseloss}
    \sbox{\automseloss}{\autoplots{3}}
    \newsavebox{\automsemae}
    \sbox{\automsemae}{\autoplots{4}}

    \newcommand{\tabplot}[1]{
        \ifnum#1<5
            \def\ylabel{Tolerance-based accuracy}
        \fi
        \ifnum#1=5
            \def\ylabel{Mean squared error}
        \fi
        \ifnum#1=1
            \def\xlabel{$\hat{y}$}
            \def\xmin{19.5}
            \def\xmax{24.5}
            \def\xticks{{20, 21, 22, 23, 24}}
            \def\xticklabels{20, 21, 22, 23, 24}
        \fi
        \ifnum#1>1
            \def\xlabel{$\beta_1$}
            \def\xmin{19.5}
            \def\xmax{24.5}
            \def\xticks{{20, 21, 22, 23, 24}}
        \fi
        \ifnum#1=2
            \def\xticklabels{?,?,?,?,?}
        \fi
        \ifnum#1>2
            \def\xticklabels{0.277, 0.291, 0.305, 0.319, 0.333}
        \fi
        \begin{tikzpicture}
            \begin{axis}[
                height=4.5cm,
                width=8cm,
                ylabel=\footnotesize{\ylabel},
                ymin=-0.1,
                ymax=1.1,
                ytick={0, 1},
                xlabel=\footnotesize{\xlabel},
                xmin=\xmin,
                xmax=\xmax,
                xtick={\xticks},
                xtick pos=bottom,
                ytick pos=left,
                xticklabels/.expanded={\xticklabels}
            ]

                \ifnum#1<5
                    \addplot[red, thick] coordinates {
                        (19, 1)
                        (21, 1)
                        (21, 0)
                        (23, 0)
                        (23, 1)
                        (25, 1)
                    };
                \fi

                \ifnum#1=4
                    \node[fill=red, inner sep=3pt, circle] at (axis cs: 23.6, 1) {};
                \fi

                \ifnum#1=5
                    \addplot[
                        red,
                        thick,
                        domain=19:25,
                        samples=100
                    ] {(x-22)^2/5};
                    \node[fill=red, inner sep=3pt, circle] at (axis cs: 23.6, 1.6^2/5) {};
                    \draw[-stealth, very thick] (axis cs: 23.527, 1.527^2/5) -- (axis cs: 23.3, 1.3^2/5 - 0);
                \fi
            \end{axis}
        \end{tikzpicture}
    }

    \newsavebox{\lossvsprediction}
    \sbox{\lossvsprediction}{\tabplot{1}}
    \newsavebox{\lossvsbeta}
    \sbox{\lossvsbeta}{\tabplot{2}}
    \newsavebox{\lossvsknownbeta}
    \sbox{\lossvsknownbeta}{\tabplot{3}}
    \newsavebox{\losspoint}
    \sbox{\losspoint}{\tabplot{4}}
    \newsavebox{\lossmse}
    \sbox{\lossmse}{\tabplot{5}}

    \begin{frame}{Loss functions and performance metrics}
        \only<1>{
            \hspace{0.4cm}\textbf{Commonalities}\\[-0.0cm]
            \begin{itemize}
                \item Allows us to evaluate the performance of a model
                \item Typically on the form $f(y, \hat{y})$
            \end{itemize}
            \hspace{0.4cm}\textbf{Loss functions}\\[-0.0cm]
            \begin{itemize}
                \item Tailored specifically for mathematical optimization of models
            \end{itemize}
            \hspace{0.4cm}\textbf{Performance metrics}\\[-0.0cm]
            \begin{itemize}
                \item Tailored specifically for interpretation of model performance by humans
            \end{itemize}
        }
        \only<2-19>{
            \begin{tikzpicture}
                \node[] at (-5.25, -3.5) {};
                \node[] at (5.25, 3.5) {};

                \visible<2-7>{
                    \node[] at (0, -2.1) {
                        $\text{mse} (y, \hat{y})= \dfrac{1}{n}\sum\limits_{i=0}^{n} (y_i - \hat{y}_i)^2$
                    };
                }
                \visible<3>{
                    \node[] at (-0.6, 1) {
                        \usebox{\autodata}
                    };
                }
                \visible<4,7>{
                    \node[] at (-0.6, 1) {
                        \usebox{\automsemodel}
                    };
                }
                \visible<5-6>{
                    \node[] at (-0.6, 1) {
                        \usebox{\automseloss}
                    };
                }
                \visible<6>{
                    \node[] at (0.125, -3.1) {
                        $=23.94$
                    };
                }
                \visible<7>{
                    \node[] at (-0.07, -3.1) {
                        $\text{mae} (y, \hat{y})= \dfrac{1}{n}\sum\limits_{i=0}^{n} |y_i - \hat{y}_i|$
                    };
                }
                \visible<8>{
                    \node[] at (-0.6, 1) {
                        \usebox{\automsemae}
                    };
                    \node[teal] at (-0.07, -3.1) {
                        $\text{mae} (y, \hat{y})= \dfrac{1}{n}\sum\limits_{i=0}^{n} |y_i - \hat{y}_i|$
                    };
                    \node[red] at (0, -2.1) {
                        $\text{mse} (y, \hat{y})= \dfrac{1}{n}\sum\limits_{i=0}^{n} (y_i - \hat{y}_i)^2$
                    };
                }
                \visible<9,18>{
                    \node[text width=9cm] (losses) at (0, 0) {
                        \hspace{0.4cm}\textbf{Loss functions}\\[-0.0cm]
                        \begin{itemize}
                            \item Different loss functions measures different properties of the model fit
                            \item Optimizing for them gives different parameter estimates
                            \visible<18>{\item Must be differentiable to allow for mathematical optimization}
                        \end{itemize}
                    };
                }
                \visible<10>{
                    \node[align=center] at (0, 0) {
                        \textbf{Tolerance-based accuracy:}\\
                        A prediction is considered correct if it is within a\\
                        predefined margin of error from the true value\\[0.5cm]
                        $\text{accuracy*}(y, \hat{y}) = \begin{cases}
                            0 & \text{if } |y - \hat{y}| < \text{tol}\\
                            1 & else
                        \end{cases}$
                    };
                }
                \visible<11-14>{
                    \node[] at (0, 2.5) {
                        \begin{tabular}{|c|c|}
                            \hline
                            \textbf{mpg}&\textbf{horsepower}\\
                            \hline
                            22&72\\
                            \hline
                        \end{tabular}
                    };
                }
                \visible<12-13>{
                    \node[] at (-0.6, -0.5) {
                        \usebox{\lossvsprediction}
                    };
                }
                \visible<13-14>{
                    \node[] at (0, -3) {
                        $\hat{y}=\beta_0 + \beta_{1} \times \text{horsepower}$
                    };
                }
                \visible<14>{
                    \node[] at (-0.6, -0.5) {
                        \usebox{\lossvsbeta}
                    };
                }
                \visible<15>{
                    \node[] at (-0.6, -0.5) {
                        \usebox{\lossvsknownbeta}
                    };
                    \node[] at (0, -3) {
                        $\hat{y}=0 + \beta_1 \times \text{horsepower}$
                    };
                }
                \visible<16>{
                    \node[] at (-0.6, -0.5) {
                        \usebox{\losspoint}
                    };
                }
                \visible<16-17>{
                    \node[] at (0, -3) {
                        $\hat{y}=0 + 0.33 \times \text{horsepower}$
                    };
                }
                \visible<17>{
                    \node[] at (-0.6, -0.6) {
                        \usebox{\lossmse}
                    };
                }
                \visible<19>{
                    \node[] at (0, 0.75) {
                        $\text{mse} (y, \hat{y})= \dfrac{1}{n}\sum\limits_{i=0}^{n} (y_i - \hat{y}_i)^2$
                    };
                    \node[] at (0, 0) {OR};
                    \node[] at (-0.07, -0.75) {
                        $\text{mae} (y, \hat{y})= \dfrac{1}{n}\sum\limits_{i=0}^{n} |y_i - \hat{y}_i|$
                    };
                }
            \end{tikzpicture}
        }
    \end{frame}

    \begin{frame}[t]{Performance metrics: Regression} % MSE
        \centering
        \begin{tikzpicture}
            \node[] at (0, 0) {};
            \node[] at (10.5, -7.2) {};

            \only<1>{
                \node[] at (5.25, -1.5) {
                \LARGE{$\dfrac{1}{n}\sum\limits_{i=0}^{n} (y_i - \hat{y}_i)^2$}
                };
                \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                    \textbf{\underline{Mean squared error (MSE)}}\\
                    \begin{itemize}
                        \item[\textcolor{green}{+}] Can be used as a loss function
                        \item[\textcolor{green}{+}] Widely used
                        \item[\textcolor{green}{+}] Intuitive
                        \item[\textcolor{green}{+}] Penalizes large errors
                        \item[?] Interpretation
                        \item[\textcolor{red}{-}] Depends on scale
                    \end{itemize}
                };
            }
            \only<2>{
                \node[] at (5.25, -1.5) {
                    \LARGE{$\sqrt{\dfrac{1}{n}\sum\limits_{i=0}^{n} (y_i - \hat{y}_i)^2}$}
                };
                \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                    \textbf{\underline{Root mean squared error (RMSE)}}\\
                    \begin{itemize}
                        \item[\textcolor{green}{+}] Can be used as a loss function
                        \item[\textcolor{green}{+}] Intuitive
                        \item[\textcolor{green}{+}] Penalizes large errors
                        \item[\textcolor{green}{+}] More interpretable than MSE,\\
                        total loss $\approx$ individual loss
                        \item[\textcolor{red}{-}] Depends on scale
                    \end{itemize}
                };
            }
            \only<3>{
                \node[] at (5.25, -1.5) {
                    \LARGE{$\dfrac{1}{n}\sum\limits_{i=0}^{n} |y_i - \hat{y}_i|$}
                };
                \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                    \textbf{\underline{Mean absolute error (MAE)}}\\
                    \begin{itemize}
                        \item[\textcolor{green}{+}] Can be used as a loss function
                        \item[\textcolor{green}{+}] More interpretable than MSE/RMSE,\\
                        total loss = average error
                        \item[\textcolor{red}{-}] Feels a bit off
                        \item[\textcolor{red}{-}] Depends on scale
                    \end{itemize}
                };
            }
            \only<4>{
                \node[] at (5.25, -1.5) {
                    \Large{$\frac{\sum\limits_{i=1}^{n} (y_i - \bar{y})(\hat{y}_i - \bar{\hat{y}})}{\sqrt{\sum\limits_{i=1}^{n} (y_i - \bar{y})^2 \sum\limits_{i=1}^{n} (\hat{y}_i - \bar{\hat{y}})^2}}$}
                };
                \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                    \textbf{\underline{Pearson correlation coefficient (r)}}\\
                    \begin{itemize}
                        \item[\textcolor{green}{+}] Scale independent
                        \item[?] Captures linear correlation
                        \item[\textcolor{red}{-}] Should not be used as a loss function
                        \item[\textcolor{red}{-}] Does not care about whether the predictions are close to the true values
                    \end{itemize}
                };
            }
            \only<5>{
                \node[] at (5.25, -1.5) {
                    \Large{$1 - \frac{\sum\limits_{i=1}^{n}(y_i - \hat{y}_i)^2}{\sum\limits_{i=1}^{n}(y_i - \bar{y}_i)^2}$}
                };
                \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                    \textbf{\underline{Proportion of variance explained ($r^2$)}}\\
                    \begin{itemize}
                        \item[\textcolor{green}{+}] Scale independent
                        \item[\textcolor{green}{+}] Interpretable
                        \item[?] Captures linear correlation
                        \item[\textcolor{red}{-}] Should not be used as a loss function
                        \item[\textcolor{red}{-}] Does not care about whether the predictions are close to the true values
                    \end{itemize}
                };
            }
        \end{tikzpicture}
    \end{frame}

    \newcommand{\casecontrolplot}[1]{
        \colorlet{cases}{red}
        \colorlet{controls}{blue}

        \ifnum#1<3
            \def\axislines{none}
            \def\ymajorticks{false}
        \fi
        \ifnum#1>2
            \def\axislines{box}
            \def\ymajorticks{true}
        \fi
        \ifnum#1<4
            \def\xticks{0, 0.25, 0.5, 0.75, 1}
            \def\xticklabels{0, 0.25, 0.5, 0.75, 1}
        \fi
        \ifnum#1>3
            \def\xticks{0.2, 0.8}
            \def\xticklabels{0, 1}
        \fi
        \begin{tikzpicture}
            \begin{axis}[
                height=5cm,
                width=7cm,
                axis lines=\axislines,
                ymajorticks=\ymajorticks,
                ytick={0, 1},
                ytick pos=left,
                xtick/.expanded={\xticks},
                xticklabels/.expanded={\xticklabels},
                xlabel=\small{Prediction},
                xmin=-0.1,
                xmax=1.1,
                ymin=-0.25,
                ymax=1.25,
                xtick pos=bottom,
                clip=false,
                typeset ticklabels with strut,
                xlabel style={yshift=0.2cm},
                tick label style={font=\small},
            ]
                \ifnum#1=1
                    \addplot[
                        only marks,
                        mark options={fill=controls}
                    ] coordinates {
                        (0.588, -0.026)
                        (0.491, 0.021)
                        (0.522, -0.042)
                        (0.450, -0.004)
                        (0.488, 0.006)
                        (0.573, 0.073)
                        (0.505, -0.060)
                        (0.554, -0.002)
                        (0.502, -0.023)
                        (0.576, -0.031)
                        (0.607, -0.018)
                        (0.544, 0.018)
                        (0.523, -0.093)
                        (0.432, -0.054)
                        (0.460, 0.085)
                        (0.479, 0.072)
                        (0.547, -0.108)
                        (0.523, -0.082)
                        (0.586, -0.049)
                        (0.527, 0.021)
                    };

                    \addplot[
                        only marks,
                        mark options={fill=cases}
                    ] coordinates {
                        (0.494, -0.047 + 1)
                        (0.526, -0.001 + 1)
                        (0.514, 0.039 + 1)
                        (0.451, -0.002 + 1)
                        (0.459, -0.077 + 1)
                        (0.533, 0.079 + 1)
                        (0.479, -0.025 + 1)
                        (0.462, 0.031 + 1)
                        (0.472, 0.038 + 1)
                        (0.462, -0.014 + 1)
                        (0.549, 0.013 + 1)
                        (0.572, 0.008 + 1)
                        (0.491, 0.022 + 1)
                        (0.501, 0.015 + 1)
                        (0.453, -0.046 + 1)
                        (0.439, -0.023 + 1)
                        (0.477, 0.007 + 1)
                        (0.446, 0.016 + 1)
                        (0.487, -0.036 + 1)
                        (0.424, 0.004 + 1)
                    };
                \fi
                \ifnum#1=2
                    \addplot[
                        only marks,
                        mark options={fill=controls}
                    ] coordinates {
                        (0.588 + 0.5, -0.026)
                        (0.491 + 0.5, 0.021)
                        (0.522 + 0.5, -0.042)
                        (0.450 - 0.5, -0.004)
                        (0.488 - 0.5, 0.006)
                        (0.573 - 0.5, 0.073)
                        (0.505 - 0.5, -0.060)
                        (0.554 - 0.5, -0.002)
                        (0.502 - 0.5, -0.023)
                        (0.576 - 0.5, -0.031)
                        (0.607 - 0.5, -0.018)
                        (0.544 - 0.5, 0.018)
                        (0.523 - 0.5, -0.093)
                        (0.432 - 0.5, -0.054)
                        (0.460 - 0.5, 0.085)
                        (0.479 - 0.5, 0.072)
                        (0.547 - 0.5, -0.108)
                        (0.523 - 0.5, -0.082)
                        (0.586 - 0.5, -0.049)
                        (0.527 - 0.5, 0.021)
                    };

                    \addplot[
                        only marks,
                        mark options={fill=cases}
                    ] coordinates {
                        (0.494 - 0.5, -0.047 + 1)
                        (0.526 - 0.5, -0.001 + 1)
                        (0.514 - 0.5, 0.039 + 1)
                        (0.451 + 0.5, -0.002 + 1)
                        (0.459 + 0.5, -0.077 + 1)
                        (0.533 + 0.5, 0.079 + 1)
                        (0.479 + 0.5, -0.025 + 1)
                        (0.462 + 0.5, 0.031 + 1)
                        (0.472 + 0.5, 0.038 + 1)
                        (0.462 + 0.5, -0.014 + 1)
                        (0.549 + 0.5, 0.013 + 1)
                        (0.572 + 0.5, 0.008 + 1)
                        (0.491 + 0.5, 0.022 + 1)
                        (0.501 + 0.5, 0.015 + 1)
                        (0.453 + 0.5, -0.046 + 1)
                        (0.439 + 0.5, -0.023 + 1)
                        (0.477 + 0.5, 0.007 + 1)
                        (0.446 + 0.5, 0.016 + 1)
                        (0.487 + 0.5, -0.036 + 1)
                        (0.424 + 0.5, 0.004 + 1)
                    };

                    \node[
                        align=center,
                        font=\small\linespread{0.8}\selectfont
                    ] (predcontrols) at (axis cs: 0, 0.5) {Predicted\\controls};
                    \node[
                        align=center,
                        font=\small\linespread{0.8}\selectfont
                    ] (predpatients) at (axis cs: 1, 0.5) {Predicted\\patients};
                    \draw[stealth-stealth] (predcontrols) -- (predpatients);
                    \draw[stealth-stealth] (controls) -- (patients);
                \fi

                \ifnum#1<3
                    \node[anchor=south] (patients) at (axis cs: 0.5, 1.12) {
                        Patients
                    };
                    \node[anchor=north] (controls) at (axis cs: 0.5, -0.12) {
                        Controls
                    };
                \fi

                \ifnum#1>2
                    \ifnum#1<6
                        \addplot[
                            only marks,
                            mark options={fill=controls}
                        ] coordinates {
                            (0.588 - 0.5, -0.026)
                            (0.491 - 0.45, 0.021)
                            (0.522 - 0.4, -0.042)
                            (0.450 - 0.425, -0.004)
                            (0.488 - 0.375, 0.006)
                            (0.573 - 0.325, 0.073)
                            (0.505 - 0.275, -0.060)
                            (0.554 - 0.225, -0.002)
                            (0.502 - 0.35, -0.023)
                            (0.576 - 0.15, -0.031)
                            (0.607 - 0.1, -0.018)
                            (0.544 - 0.05, 0.018)
                            (0.523 - 0.0, -0.093)
                            (0.432- 0.125, -0.054)
                            (0.460 + 0.025, 0.085)
                            (0.479 + 0.075, 0.072)
                            (0.547 + 0.125, -0.108)
                            (0.523 + 0.175, -0.082)
                            (0.586+ 0.05, -0.049)
                            (0.527 + 0.2, 0.021)
                        };

                        \addplot[
                            only marks,
                            mark options={fill=cases}
                        ] coordinates {
                            (0.494 - 0.2, -0.047 + 1)
                            (0.526 - 0.15, -0.001 + 1)
                            (0.514 - 0.1, 0.039 + 1)
                            (0.451 - 0.05, -0.002 + 1)
                            (0.459 - 0.075, -0.077 + 1)
                            (0.533 + 0.025, 0.079 + 1)
                            (0.479 + 0.075, -0.025 + 1)
                            (0.462 + 0.125, 0.031 + 1)
                            (0.472 + 0.1, 0.038 + 1)
                            (0.462 + 0.15, -0.014 + 1)
                            (0.549 + 0.2, 0.013 + 1)
                            (0.572 + 0.25, 0.008 + 1)
                            (0.491 + 0.3, 0.022 + 1)
                            (0.501 + 0.325, 0.015 + 1)
                            (0.453 + 0.35, -0.046 + 1)
                            (0.439 + 0.4, -0.023 + 1)
                            (0.477 + 0.425, 0.007 + 1)
                            (0.446 + 0.45, 0.016 + 1)
                            (0.487 + 0.475, -0.036 + 1)
                            (0.424 + 0.5, 0.004 + 1)
                        };
                    \fi
                    \ifnum#1>5
                        \addplot[
                            only marks,
                            mark options={fill=controls},
                            opacity=0.2
                        ] coordinates {
                            (0.588 - 0.5, -0.026)
                            (0.491 - 0.45, 0.021)
                            (0.522 - 0.4, -0.042)
                            (0.450 - 0.425, -0.004)
                            (0.488 - 0.375, 0.006)
                            (0.573 - 0.325, 0.073)
                            (0.505 - 0.275, -0.060)
                            (0.554 - 0.225, -0.002)
                            (0.502 - 0.35, -0.023)
                            (0.576 - 0.15, -0.031)
                            (0.607 - 0.1, -0.018)
                            (0.544 - 0.05, 0.018)
                            (0.523 - 0.0, -0.093)
                            (0.432- 0.125, -0.054)
                            (0.460 + 0.025, 0.085)
                            (0.479 + 0.075, 0.072)
                            (0.547 + 0.125, -0.108)
                            (0.523 + 0.175, -0.082)
                            (0.586+ 0.05, -0.049)
                            (0.527 + 0.2, 0.021)
                        };

                        \addplot[
                            only marks,
                            mark options={fill=cases},
                            opacity=0.2
                        ] coordinates {
                            (0.494 - 0.2, -0.047 + 1)
                            (0.526 - 0.15, -0.001 + 1)
                            (0.514 - 0.1, 0.039 + 1)
                            (0.451 - 0.05, -0.002 + 1)
                            (0.459 - 0.075, -0.077 + 1)
                            (0.533 + 0.025, 0.079 + 1)
                            (0.479 + 0.075, -0.025 + 1)
                            (0.462 + 0.125, 0.031 + 1)
                            (0.472 + 0.1, 0.038 + 1)
                            (0.462 + 0.15, -0.014 + 1)
                            (0.549 + 0.2, 0.013 + 1)
                            (0.572 + 0.25, 0.008 + 1)
                            (0.491 + 0.3, 0.022 + 1)
                            (0.501 + 0.325, 0.015 + 1)
                            (0.453 + 0.35, -0.046 + 1)
                            (0.439 + 0.4, -0.023 + 1)
                            (0.477 + 0.425, 0.007 + 1)
                            (0.446 + 0.45, 0.016 + 1)
                            (0.487 + 0.475, -0.036 + 1)
                            (0.424 + 0.5, 0.004 + 1)
                        };
                    \fi
                \fi
                \ifnum#1=4
                    \draw[densely dotted, red] (axis cs: 0.5, -0.25) -- (axis cs: 0.5, 1.25);
                    \node[anchor=south, red] at (axis cs: 0.5, 1.25) {
                        \small{Threshold}
                    };
                \fi
                \ifnum#1>4
                    \draw[] (axis cs: 0.5, -0.25) -- (axis cs: 0.5, 1.25);
                    \draw[] (axis cs: -0.1, 0.5) -- (axis cs: 1.1, 0.5);
                \fi
                \ifnum#1=6
                    \addplot[
                        only marks,
                        mark options={fill=controls},
                    ] coordinates {
                        (0.588 - 0.5, -0.026)
                        (0.491 - 0.45, 0.021)
                        (0.522 - 0.4, -0.042)
                        (0.450 - 0.425, -0.004)
                        (0.488 - 0.375, 0.006)
                        (0.573 - 0.325, 0.073)
                        (0.505 - 0.275, -0.060)
                        (0.554 - 0.225, -0.002)
                        (0.502 - 0.35, -0.023)
                        (0.576 - 0.15, -0.031)
                        (0.544 - 0.05, 0.018)
                        (0.432 - 0.125, -0.054)
                        (0.460 + 0.025, 0.085)
                    };
                \fi
                \ifnum#1>5
                    \node[anchor=north west, inner sep=2pt] at (axis cs: -0.1, 0.5) {\footnotesize{True negatives}};
                \fi
                \ifnum#1=7
                    \addplot[
                        only marks,
                        mark options={fill=cases}
                    ] coordinates {
                        (0.533 + 0.025, 0.079 + 1)
                        (0.479 + 0.075, -0.025 + 1)
                        (0.462 + 0.125, 0.031 + 1)
                        (0.472 + 0.1, 0.038 + 1)
                        (0.462 + 0.15, -0.014 + 1)
                        (0.549 + 0.2, 0.013 + 1)
                        (0.572 + 0.25, 0.008 + 1)
                        (0.491 + 0.3, 0.022 + 1)
                        (0.501 + 0.325, 0.015 + 1)
                        (0.453 + 0.35, -0.046 + 1)
                        (0.439 + 0.4, -0.023 + 1)
                        (0.477 + 0.425, 0.007 + 1)
                        (0.446 + 0.45, 0.016 + 1)
                        (0.487 + 0.475, -0.036 + 1)
                        (0.424 + 0.5, 0.004 + 1)
                    };
                \fi
                \ifnum#1>6
                    \node[anchor=south east, inner sep=2pt] at (axis cs: 1.1, 0.5) {\footnotesize{True positives}};
                \fi
                \ifnum#1=8
                    \addplot[
                        only marks,
                        mark options={fill=cases}
                    ] coordinates {
                        (0.494 - 0.2, -0.047 + 1)
                        (0.526 - 0.15, -0.001 + 1)
                        (0.514 - 0.1, 0.039 + 1)
                        (0.451 - 0.05, -0.002 + 1)
                        (0.459 - 0.075, -0.077 + 1)
                    };
                \fi
                \ifnum#1>7
                    \node[anchor=south west, inner sep=2pt] at (axis cs: -0.1, 0.5) {\footnotesize{False negatives}};
                \fi
                \ifnum#1=9
                    \addplot[
                        only marks,
                        mark options={fill=controls}
                    ] coordinates {
                        (0.607 - 0.1, -0.018)
                        (0.523 - 0.0, -0.093)
                        (0.479 + 0.075, 0.072)
                        (0.547 + 0.125, -0.108)
                        (0.523 + 0.175, -0.082)
                        (0.586+ 0.05, -0.049)
                        (0.527 + 0.2, 0.021)
                    };
                \fi
                \ifnum#1>8
                    \node[anchor=north east, inner sep=2pt] at (axis cs: 1.1, 0.5) {\footnotesize{False positives}};
                \fi
            \end{axis}
        \end{tikzpicture}
    }

    \newsavebox{\casecontrolsimple}
    \sbox{\casecontrolsimple}{\casecontrolplot{1}}
    \newsavebox{\casecontrolpredictions}
    \sbox{\casecontrolpredictions}{\casecontrolplot{2}}
    \newsavebox{\casecontrolcontinuous}
    \sbox{\casecontrolcontinuous}{\casecontrolplot{3}}
    \newsavebox{\casecontrolthreshold}
    \sbox{\casecontrolthreshold}{\casecontrolplot{4}}
    \newsavebox{\casecontrolcm}
    \sbox{\casecontrolcm}{\casecontrolplot{5}}
    \newsavebox{\casecontroltn}
    \sbox{\casecontroltn}{\casecontrolplot{6}}
    \newsavebox{\casecontroltp}
    \sbox{\casecontroltp}{\casecontrolplot{7}}
    \newsavebox{\casecontrolfn}
    \sbox{\casecontrolfn}{\casecontrolplot{8}}
    \newsavebox{\casecontrolfp}
    \sbox{\casecontrolfp}{\casecontrolplot{9}}

    \newcommand{\datasetplot}[1]{
        \begin{tikzpicture}
            \begin{axis}[
                height=5cm,
                width=5cm,
                axis lines=none,
                ymajorticks=false,
                xmin=-0.1,
                xmax=1.1,
                ymin=-0.25,
                ymax=1.25,
                clip=false
            ]
                \ifnum#1=1
                \addplot[
                    only marks,
                    mark options={fill=controls}
                ] coordinates {
                    (0.588, -0.026)
                    (0.491, 0.021)
                    (0.522, -0.042)
                    (0.450, -0.004)
                    (0.488, 0.006)
                    (0.573, 0.073)
                    (0.505, -0.060)
                    (0.554, -0.002)
                    (0.502, -0.023)
                    (0.576, -0.031)
                    (0.607, -0.018)
                    (0.544, 0.018)
                    (0.523, -0.093)
                    (0.432, -0.054)
                    (0.460, 0.085)
                    (0.479, 0.072)
                    (0.547, -0.108)
                    (0.523, -0.082)
                    (0.586, -0.049)
                    (0.527, 0.021)
                };

                \addplot[
                    only marks,
                    mark options={fill=cases}
                ] coordinates {
                    (0.494, -0.047 + 1)
                    (0.526, -0.001 + 1)
                    (0.514, 0.039 + 1)
                    (0.451, -0.002 + 1)
                    (0.459, -0.077 + 1)
                    (0.533, 0.079 + 1)
                    (0.479, -0.025 + 1)
                    (0.462, 0.031 + 1)
                    (0.472, 0.038 + 1)
                    (0.462, -0.014 + 1)
                    (0.549, 0.013 + 1)
                    (0.572, 0.008 + 1)
                    (0.491, 0.022 + 1)
                    (0.501, 0.015 + 1)
                    (0.453, -0.046 + 1)
                    (0.439, -0.023 + 1)
                    (0.477, 0.007 + 1)
                    (0.446, 0.016 + 1)
                    (0.487, -0.036 + 1)
                    (0.424, 0.004 + 1)
                };
                \node[] at (axis cs: 0.5, 1.25) {
                    Patients ($n=50$)
                };
                \node[] at (axis cs: 0.5, -0.25) {
                    Controls ($n=50$)
                };
            \fi
            \ifnum#1=2
                \addplot[
                    only marks,
                    mark options={fill=controls}
                ] coordinates {
                    (0.588, -0.026)
                    (0.491, 0.021)
                    (0.522, -0.042)
                    (0.450, -0.004)
                    (0.488, 0.006)
                    (0.573, 0.073)
                    (0.505, -0.060)
                    (0.554, -0.002)
                    (0.502, -0.023)
                    (0.576, -0.031)
                    (0.607, -0.018)
                    (0.544, 0.018)
                    (0.523, -0.093)
                    (0.432, -0.054)
                    (0.460, 0.085)
                    (0.479, 0.072)
                    (0.547, -0.108)
                    (0.523, -0.082)
                    (0.586, -0.049)
                    (0.527, 0.021)
                    (0.548, -0.056)
                    (0.497, 0.023)
                    (0.552, -0.1)
                    (0.450, -0.004)
                    (0.488, 0.006)
                    (0.573, 0.033)
                    (0.535, 0.060)
                    (0.514, 0.002)
                    (0.522, -0.043)
                };

                \addplot[
                    only marks,
                    mark options={fill=cases}
                ] coordinates {
                    (0.494, -0.047 + 1)
                    (0.526, -0.001 + 1)
                    (0.514, 0.039 + 1)
                };
                \node[] at (axis cs: 0.5, 1.25) {
                    Patients ($n=3$)
                };
                \node[] at (axis cs: 0.5, -0.25) {
                    Controls ($n=97$)
                };
            \fi

            \end{axis}
        \end{tikzpicture}
    }

    \newsavebox{\balanceddataset}
    \sbox{\balanceddataset}{\datasetplot{1}}

    \newsavebox{\imbalanceddataset}
    \sbox{\imbalanceddataset}{\datasetplot{2}}

    \begin{frame}{Performance metrics: Binary classification}
        \only<1-10>{
            \begin{tikzpicture}
                \node[] at (-5.25, -3.5) {};
                \node[] at (5.25, 3.5) {};

                \only<1>{
                    \node[] at (-0.2, 1) {
                        \usebox{\casecontrolsimple}
                    };
                }
                \only<2>{
                    \node[] at (-0.2, 1) {
                        \usebox{\casecontrolpredictions}
                    };
                }
                \only<3>{
                    \node[] at (-0.4, 0.5) {
                        \usebox{\casecontrolcontinuous}
                    };
                }
                \only<4>{
                    \node[] at (-0.4, 0.735) {
                        \usebox{\casecontrolthreshold}
                    };
                }
                \only<5>{
                    \node[] at (-0.4, 0.5) {
                        \usebox{\casecontrolcm}
                    };
                }
                \only<6>{
                    \node[] at (-0.4, 0.5) {
                        \usebox{\casecontroltn}
                    };
                }
                \only<7>{
                    \node[] at (-0.4, 0.5) {
                        \usebox{\casecontroltp}
                    };
                }
                \only<8>{
                    \node[] at (-0.4, 0.5) {
                        \usebox{\casecontrolfn}
                    };
                }
                \only<9>{
                    \node[] at (-0.4, 0.5) {
                        \usebox{\casecontrolfp}
                    };
                }
                \visible<1-2>{
                    \node[] at (0, -2.5) {
                        $y \in \{Patients, Controls\}$
                    };
                }
                \visible<2>{
                    \node[] at (0, -3) {
                        $\hat{y} \in \{Patients, Controls\}$
                    };
                }
                \visible<3>{
                    \node[] at (0, -2.5) {
                        $y \in \{0, 1\}$
                    };
                    \node[] at (0, -3) {
                        $\hat{y} \in [0, 1]$
                    };
                }
                \visible<4>{
                    \node[] at (0, -2.5) {
                        $y \in \{0, 1\}$
                    };
                    \node[] at (0, -3) {
                        $\hat{y} \in \{0, 1\}$
                    };
                }
                \visible<5-10>{
                    \node[] (cm) at (0, -2.75) {
                        \begin{tabular}{|m{0.4cm}|m{0.4cm}|}
                            \hline
                            \visible<6-10>{TN}&\visible<9-10>{FP}\\
                            \hline
                            \visible<8-10>{FN}&\visible<7-10>{TP}\\
                            \hline
                        \end{tabular}
                    };
                }
                \visible<10>{
                    \node[anchor=south] at ($ (cm.north) - (0.45, 0.1) $) {
                        \small{0}
                    };
                    \node[anchor=south] at ($ (cm.north) - (-0.35, 0.1) $) {
                        \small{1}
                    };
                    \node[anchor=east] at ($ (cm.west) + (0.1, 0.25) $) {
                        \small{0}
                    };
                    \node[anchor=east] at ($ (cm.west) + (0.1, -0.25) $) {
                        \small{1}
                    };
                    \node[] at ($ (cm.north) + (0, 0.55) $) {
                        \small{Predicted}
                    };
                    \node[rotate=90, anchor=south] at ($ (cm.west) - (0.3, 0) $) {
                        \small{True}
                    };
                    \node[] at ($ (cm.north) + (0, 1.2) $) {
                        \underline{\textbf{Confusion matrix:}}
                    };
                }
            \end{tikzpicture}
        }
        \only<11>{
            \textbf{Binary classification metrics:}
            \begin{itemize}
                \item Many metrics rely on thresholding the predictions to obtain binary predictions.
                \item Although not a metric per se, the confusion matrix is a very useful tool to understand model behaviour, and should \textbf{always} be looked at (and preferably reported).
            \end{itemize}
        }
        \only<12-19>{
            \begin{tikzpicture}
                \node[] at (0, 0) {};
                \node[] at (10.5, -7.2) {};

                \only<12>{
                    \node[] at (5.25, -1.5) {
                        \LARGE{$-(y \log(\hat{y}) + (1 - y) \log(1 - \hat{y}))$}
                    };
                    \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                        \textbf{\underline{Logloss}}\\
                        \begin{itemize}
                            \item[\textcolor{green}{+}] Does not rely on thresholding
                            \item[\textcolor{green}{+}] Can be used as a loss function (and very often is)
                            \item[\textcolor{red}{-}] Not very interpretable
                        \end{itemize}
                    };
                }

                \only<13>{
                    \node[] at (5.25, -1.5) {
                        \LARGE{$\frac{TP + TN}{TP + TN + FP + FN}$}
                    };
                    \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                        \textbf{\underline{Accuracy}}\\
                        \begin{itemize}
                            \item[\textcolor{green}{+}] \textbf{Interpretable}
                            \item[\textcolor{red}{-}] \textbf{Does not account for imbalanced classes}
                            \item[\textcolor{red}{-}] Does not account for different costs of misclassification
                        \end{itemize}
                    };
                }
                \only<14>{
                    \node[] (dataset) at (2, -3.5) {
                        \usebox{\balanceddataset}
                    };
                    \node[draw=black, dashed, align=center] (model) at (5, -3.5) {
                        Modelling\\pipeline
                    };
                    \node[](result) at (8, -3.5) {
                        \begin{tabular}{|c|c|}
                            \hline
                            37&13\\
                            \hline
                            11&39\\
                            \hline
                        \end{tabular}
                    };
                    \node[] at (8, -4.3) {
                        accuracy=76\%
                    };
                    \draw[-stealth] (model) -- (result);
                    \draw[-stealth] ($ (dataset.north) + (0.35, -1.1) $) -- (model.west);
                    \draw[-stealth] ($ (dataset.south) + (0.35, 1.1) $) -- (model.west);
                }
                \only<15>{
                    \node[] (dataset) at (2, -3.5) {
                        \usebox{\imbalanceddataset}
                    };
                    \node[draw=black, dashed, align=center] (model) at (5, -3.5) {
                        Modelling\\pipeline
                    };
                    \node[](result) at (8, -3.5) {
                        \begin{tabular}{|c|c|}
                            \hline
                            97&0\\
                            \hline
                            3&0\\
                            \hline
                        \end{tabular}
                    };
                    \node[] at (8, -4.3) {
                        accuracy=97\%
                    };
                    \draw[-stealth] (model) -- (result);
                    \draw[-stealth] ($ (dataset.north) + (0.35, -1.1) $) -- (model.west);
                    \draw[-stealth] ($ (dataset.south) + (0.35, 1.1) $) -- (model.west);
                }
                \only<16>{
                    \node[] at (5.25, -1.5) {
                        \LARGE{$\frac{TP}{TP + FN}$}
                    };
                    \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                        \textbf{\underline{True positive rate (sensitivity)}}\\
                        \begin{itemize}
                            \item[\textcolor{green}{+}] Interpretable, calculates the proportion of cases that are detected
                            \item[\textcolor{green}{+}] Useful when the cost of false negatives is high (Population-wide screening for severe disease)
                        \end{itemize}
                    };
                }
                \only<17>{
                    \node[] at (5.25, -1.5) {
                        \LARGE{$\frac{TN}{TN + FP}$}
                    };
                    \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                        \textbf{\underline{True negative rate (specificity)}}\\
                        \begin{itemize}
                            \item[\textcolor{green}{+}] Interpretable, calculates the proportion of controls that are detected
                            \item[\textcolor{green}{+}] Useful when the cost of false positives is high (Intrusive treatment of rare and mild conditions)
                        \end{itemize}
                    };
                }
                \only<18>{
                    \node[] at (5.25, -1.5) {
                        \LARGE{$\frac{TP}{TP + FP}$}
                    };
                    \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                        \textbf{\underline{Positive predictive value (PPV, precision)}}\\
                        \begin{itemize}
                            \item[\textcolor{green}{+}] Interpretable, calculates the proportion of predicted cases that are actually cases
                            \item[\textcolor{green}{+}] Useful when the cost of false positives is high (Selection of participants for expensive clinical trials)
                        \end{itemize}
                    };
                }
                \only<19>{
                    \node[] at (5.25, -1.5) {
                        \LARGE{$\frac{\frac{TP}{TP+FN}+\frac{TN}{TN+FP}}{2}$}
                    };
                    \node[anchor=north west, align=left, text width=8.5cm] at (1, -2.75) {
                        \textbf{\underline{Balanced accuracy}}\\
                        \begin{itemize}
                            \item[\textcolor{green}{+}] Interpretable, behaves similarly to regular accuracy.
                            \item[\textcolor{green}{+}] \textbf{Takes into account imbalanced classes}
                        \end{itemize}
                    };
                }
            \end{tikzpicture}
        }
    \end{frame}

    \newcommand{\aucpredictionplot}[1]{
        \begin{tikzpicture}
            \begin{axis}[
                height=3cm,
                width=7cm,
                ymajorticks=false,
                xtick={0, 0.25, 0.5, 0.75, 1},
                xlabel=\small{Prediction},
                xmin=-0.1,
                xmax=1.1,
                ymin=-0.25,
                ymax=1.25,
                xtick pos=bottom,
                clip=false,
                typeset ticklabels with strut
            ]
                \node[] at (axis cs: -0.2, 1.6) {};
                \node[] at (axis cs: 1.2, -1.4) {};
                \ifnum#1=1
                    \addplot[
                        only marks,
                        mark options={fill=controls}
                    ] coordinates {
                        (0.588 - 0.5, -0.026)
                        (0.491 - 0.45, 0.021)
                        (0.522 - 0.4, -0.042)
                        (0.450 - 0.425, -0.004)
                        (0.488 - 0.375, 0.006)
                        (0.573 - 0.325, 0.073)
                        (0.505 - 0.275, -0.060)
                        (0.554 - 0.225, -0.002)
                        (0.502 - 0.35, -0.023)
                        (0.576 - 0.15, -0.031)
                        (0.607 - 0.1, -0.018)
                        (0.544 - 0.05, 0.018)
                        (0.523 - 0.0, -0.093)
                        (0.432- 0.125, -0.054)
                        (0.460 + 0.025, 0.085)
                        (0.479 + 0.075, 0.072)
                        (0.547 + 0.125, -0.108)
                        (0.523 + 0.175, -0.082)
                        (0.586 + 0.05, -0.049)
                        (0.527 + 0.2, 0.021)
                    };

                    \addplot[
                        only marks,
                        mark options={fill=cases}
                    ] coordinates {
                        (0.494 - 0.2, -0.047 + 1)
                        (0.526 - 0.15, -0.001 + 1)
                        (0.514 - 0.1, 0.039 + 1)
                        (0.451 - 0.05, -0.002 + 1)
                        (0.459 - 0.075, -0.077 + 1)
                        (0.533 + 0.025, 0.079 + 1)
                        (0.479 + 0.075, -0.025 + 1)
                        (0.462 + 0.125, 0.031 + 1)
                        (0.472 + 0.1, 0.038 + 1)
                        (0.462 + 0.15, -0.014 + 1)
                        (0.549 + 0.2, 0.013 + 1)
                        (0.572 + 0.25, 0.008 + 1)
                        (0.491 + 0.3, 0.022 + 1)
                        (0.501 + 0.325, 0.015 + 1)
                        (0.453 + 0.35, -0.046 + 1)
                        (0.439 + 0.4, -0.023 + 1)
                        (0.477 + 0.425, 0.007 + 1)
                        (0.446 + 0.45, 0.016 + 1)
                        (0.487 + 0.475, -0.036 + 1)
                        (0.424 + 0.5, 0.004 + 1)
                    };
                    \draw[dashed] (axis cs: 0.5, -0.25) -- (axis cs: 0.5, 1.25);
                    \node[anchor=south] at (axis cs: 0.5, 1.25) {\footnotesize{threshold}};
                \fi
                \ifnum#1>1
                    \addplot[
                        only marks,
                        mark options={fill=controls}
                    ] coordinates {
                        ((0.588 - 0.5) * 0.5, -0.026)
                        ((0.491 - 0.45) * 0.5, 0.021)
                        ((0.522 - 0.4) * 0.5, -0.042)
                        ((0.450 - 0.425) * 0.5, -0.004)
                        ((0.488 - 0.375) * 0.5, 0.006)
                        ((0.573 - 0.325) * 0.5, 0.073)
                        ((0.505 - 0.275) * 0.5, -0.060)
                        ((0.554 - 0.225) * 0.5, -0.002)
                        ((0.502 - 0.35) * 0.5, -0.023)
                        ((0.576 - 0.15) * 0.5, -0.031)
                        ((0.607 - 0.1) * 0.5, -0.018)
                        ((0.544 - 0.05) * 0.5, 0.018)
                        ((0.523 - 0.0) * 0.5, -0.093)
                        ((0.432- 0.125) * 0.5, -0.054)
                        ((0.460 + 0.025) * 0.5, 0.085)
                        ((0.479 + 0.075) * 0.5, 0.072)
                        ((0.547 + 0.125) * 0.5, -0.108)
                        ((0.523 + 0.175) * 0.5, -0.082)
                        ((0.586 + 0.05) * 0.5, -0.049)
                        ((0.527 + 0.2) * 0.5, 0.021)
                    };

                    \addplot[
                        only marks,
                        mark options={fill=cases}
                    ] coordinates {
                        ((0.494 - 0.2) * 0.5, -0.047 + 1)
                        ((0.526 - 0.15) * 0.5, -0.001 + 1)
                        ((0.514 - 0.1) * 0.5, 0.039 + 1)
                        ((0.451 - 0.05) * 0.5, -0.002 + 1)
                        ((0.459 - 0.075) * 0.5, -0.077 + 1)
                        ((0.533 + 0.025) * 0.5, 0.079 + 1)
                        ((0.479 + 0.075) * 0.5, -0.025 + 1)
                        ((0.462 + 0.125) * 0.5, 0.031 + 1)
                        ((0.472 + 0.1) * 0.5, 0.038 + 1)
                        ((0.462 + 0.15) * 0.5, -0.014 + 1)
                        ((0.549 + 0.2) * 0.5, 0.013 + 1)
                        ((0.572 + 0.25) * 0.5, 0.008 + 1)
                        ((0.491 + 0.3) * 0.5, 0.022 + 1)
                        ((0.501 + 0.325) * 0.5, 0.015 + 1)
                        ((0.453 + 0.35) * 0.5, -0.046 + 1)
                        ((0.439 + 0.4) * 0.5, -0.023 + 1)
                        ((0.477 + 0.425) * 0.5, 0.007 + 1)
                        ((0.446 + 0.45) * 0.5, 0.016 + 1)
                        ((0.487 + 0.475) * 0.5, -0.036 + 1)
                        ((0.424 + 0.5) * 0.5, 0.004 + 1)
                    };
                \fi
                \ifnum#1=2
                    \draw[dashed] (axis cs: 0.5, -0.25) -- (axis cs: 0.5, 1.25);
                    \node[anchor=south] at (axis cs: 0.5, 1.25) {\footnotesize{threshold}};
                \fi
                \ifnum#1=3
                    \draw[dashed] (axis cs: 0.25, -0.25) -- (axis cs: 0.25, 1.25);
                    \node[anchor=south] at (axis cs: 0.25, 1.25) {\footnotesize{threshold}};
                \fi
                \ifnum#1=4
                    \draw[dashed] (axis cs: 0.25, -0.25) -- (axis cs: 0.25, 1.25);
                    \node[anchor=south] at (axis cs: 0.25, 1.25) {\footnotesize{$t_0$}};
                    \draw[dashed] (axis cs: 0.5, -0.25) -- (axis cs: 0.5, 1.25);
                    \node[anchor=south] at (axis cs: 0.5, 1.25) {\footnotesize{$t_1$}};
                    \draw[dashed] (axis cs: 0.75, -0.25) -- (axis cs: 0.75, 1.25);
                    \node[anchor=south] at (axis cs: 0.75, 1.25) {\footnotesize{$t_2$}};
                \fi

                \ifnum#1=6
                    \draw[dashed, red] (axis cs: 0, -0.25) -- (axis cs: 0, 1.25);
                    \draw[dashed, red] (axis cs: 1, -0.25) -- (axis cs: 1, 1.25);
                \fi

                \ifnum#1>6
                    \draw[dashed] (axis cs: 0, -0.25) -- (axis cs: 0, 1.25);
                    \draw[dashed] (axis cs: 1, -0.25) -- (axis cs: 1, 1.25);
                    \draw[dashed] (axis cs: 0.15, -0.25) -- (axis cs: 0.15, 1.25);
                \fi
                \ifnum#1>7
                    \draw[dashed] (axis cs: 0.25, -0.25) -- (axis cs: 0.25, 1.25);
                \fi
                \ifnum#1>8
                    \draw[dashed] (axis cs: 0.35, -0.25) -- (axis cs: 0.35, 1.25);
                \fi
            \end{axis}
        \end{tikzpicture}
    }

    \newsavebox{\aucbalanced}
    \sbox{\aucbalanced}{\aucpredictionplot{1}}
    \newsavebox{\aucimbalanced}
    \sbox{\aucimbalanced}{\aucpredictionplot{2}}
    \newsavebox{\aucthreshold}
    \sbox{\aucthreshold}{\aucpredictionplot{3}}
    \newsavebox{\aucthresholds}
    \sbox{\aucthresholds}{\aucpredictionplot{4}}
    \newsavebox{\aucnothresholds}
    \sbox{\aucnothresholds}{\aucpredictionplot{5}}
    \newsavebox{\aucthresholdbounds}
    \sbox{\aucthresholdbounds}{\aucpredictionplot{6}}
    \newsavebox{\aucthresholdfirst}
    \sbox{\aucthresholdfirst}{\aucpredictionplot{7}}
    \newsavebox{\aucthresholdsecond}
    \sbox{\aucthresholdsecond}{\aucpredictionplot{8}}
    \newsavebox{\aucthresholdthird}
    \sbox{\aucthresholdthird}{\aucpredictionplot{9}}

    \newcommand{\rocplot}[1]{
        \begin{tikzpicture}
            \begin{axis}[
                width=5cm,
                height=5cm,
                ylabel=\small{True positive rate},
                xlabel=\small{False positive rate},
                xmin=0,
                xmax=1,
                ymin=0,
                ymax=1,
                ticklabel style={font=\small},
                xmajorgrids=true,
                ymajorgrids=true,
                tick style={draw=none}
            ]
                \ifnum#1=1
                    \addplot[
                        only marks,
                        mark options={fill=orange!50, very thick},
                        mark size=3pt
                    ] coordinates {
                        (0, 0)
                        (0, 0.2)
                        (0.2, 0.5)
                        (0.5, 0.95)
                        (1, 1)
                    };
                \fi
                \ifnum#1=2
                    \node[anchor=north east, font=\scriptsize\selectfont,align=center] at (axis cs: 0.95, 0.95) {
                        Receiver\\operating\\characteristic\\curve\\(ROC)
                    };
                \fi
                \ifnum#1>1
                    \ifnum#1<5
                        \addplot[
                            very thick,
                            mark=*,
                            mark options={fill=orange!50},
                            mark size=3pt,
                            name path=roc
                        ] coordinates {
                            (0, 0)
                            (0, 0.2)
                            (0.2, 0.5)
                            (0.5, 0.95)
                            (1, 1)
                        };
                    \fi
                \fi
                \ifnum#1=3
                    \addplot[dashed] coordinates {
                        (0, 0)
                        (1, 1)
                    };
                \fi
                \ifnum#1>3
                    \path[name path=axis] (axis cs:0,0) -- (axis cs:1,0);
                \fi
                \ifnum#1=4
                    \addplot[pattern=north west lines, pattern color=red] fill between [of=roc and axis];
                    \node[fill=white, draw=red, font=\footnotesize\selectfont, align=center, text=red, anchor=south east] at (axis cs: 1-0.16, 0.16) {
                        Area under\\the curve\\(AUC)
                    };
                \fi
                \ifnum#1=5
                    \draw[name path=random, very thick] (axis cs: 0, 0) -- (axis cs: 1, 1);
                    \addplot[pattern=north west lines, pattern color=red] fill between [of=random and axis];
                    \node[fill=white, draw=red, font=\footnotesize\selectfont, align=center, text=red, anchor=south east] at (axis cs: 1-0.15, 0.15) {
                        AUC=0.5
                    };
                \fi
                \ifnum#1=6
                    \draw[name path=perfect, very thick] (axis cs: 0, 0) -- (axis cs: 0, 1) -- (axis cs: 1, 1);
                    \addplot[pattern=north west lines, pattern color=red] fill between [of=perfect and axis];
                    \node[fill=white, draw=red, font=\footnotesize\selectfont, align=center, text=red, anchor=south east] at (axis cs: 1-0.15, 0.15) {
                        AUC=1.0
                    };
                \fi
            \end{axis}
        \end{tikzpicture}
    }

    \newsavebox{\rocpoints}
    \sbox{\rocpoints}{\rocplot{1}}
    \newsavebox{\roccurve}
    \sbox{\roccurve}{\rocplot{2}}
    \newsavebox{\rocbaseline}
    \sbox{\rocbaseline}{\rocplot{3}}
    \newsavebox{\rocauc}
    \sbox{\rocauc}{\rocplot{4}}
    \newsavebox{\rocrandom}
    \sbox{\rocrandom}{\rocplot{5}}
    \newsavebox{\rocperfect}
    \sbox{\rocperfect}{\rocplot{6}}

    \begin{frame}[t]{Classification metrics: Area under the curve}
        \only<1-15>{
            \centering
            \begin{tikzpicture}
                \visible<1>{
                    \node[] at (0, 0) {
                        \usebox{\aucbalanced}
                    };
                }
                \only<2>{
                    \node[] at (0, 0) {
                        \usebox{\aucimbalanced}
                    };
                }
                \only<3>{
                    \node[] at (0, 0) {
                        \usebox{\aucthreshold}
                    };
                }
                \only<4>{
                    \node[] at (0, 0) {
                        \usebox{\aucthresholds}
                    };
                }
                \only<5>{
                    \node[] at (0, 0) {
                        \usebox{\aucnothresholds}
                    };
                }
                \only<6>{
                    \node[] at (0, 0) {
                        \usebox{\aucthresholdbounds}
                    };
                }
                \only<7>{
                    \node[] at (0, 0) {
                        \usebox{\aucthresholdfirst}
                    };
                }
                \only<8>{
                    \node[] at (0, 0) {
                        \usebox{\aucthresholdsecond}
                    };
                }
                \only<9>{
                    \node[] at (0, 0) {
                        \usebox{\aucthresholdthird}
                    };
                }

                \visible<5-9>{
                    \node[inner sep=0pt] (table) at (0, -4) {
                        \small
                        \begin{tabular}{|>{\centering\arraybackslash}m{1.8cm}|>{\centering\arraybackslash}m{0.8cm}|>{\centering\arraybackslash}m{0.8cm}|}
                            \hline
                            \textbf{threshold}&\textbf{TPR}&\textbf{FPR}\\
                            \hline
                            \visible<6-9>{0}&\visible<6-9>{1}&\visible<6-9>{1}\\
                            \hline
                            \visible<7-9>{0.15}&\visible<7-9>{0.95}&\visible<7-9>{0.5}\\
                            \hline
                            \visible<8-9>{0.25}&\visible<8-9>{0.5}&\visible<8-9>{0.2}\\
                            \hline
                            \visible<9>{0.35}&\visible<9>{0.2}&\visible<9>{0.0}\\
                            \hline
                            \visible<6-9>{1}&\visible<6-9>{0}&\visible<6-9>{0}\\
                            \hline
                        \end{tabular}
                    };
                }
                \visible<10->{
                    \node[inner sep=0pt] (table) at (2.75, -2) {
                        \small
                        \begin{tabular}{|>{\centering\arraybackslash}m{1.8cm}|>{\centering\arraybackslash}m{0.8cm}|>{\centering\arraybackslash}m{0.8cm}|}
                            \hline
                            \textbf{threshold}&\textbf{TPR}&\textbf{FPR}\\
                            \hline
                            0&1&1\\
                            \hline
                            0.15&0.95&0.5\\
                            \hline
                            0.25&0.5&0.2\\
                            \hline
                            0.35&0.2&0.0\\
                            \hline
                            1&0&0\\
                            \hline
                        \end{tabular}
                    };
                }
                \visible<10>{
                    \node[] at (-2.75, -2.3) {
                        \usebox{\rocpoints}
                    };
                    \node[
                        inner sep=0pt,
                        draw=red,
                        anchor=south east,
                        very thick,
                        minimum width=2.46cm,
                        minimum height=2.3cm
                    ] at (table.south east) {};
                }
                \visible<11>{
                    \node[] at (-2.75, -2.3) {
                        \usebox{\roccurve}
                    };
                }
                \visible<12>{
                    \node[] at (-2.75, -2.3) {
                        \usebox{\rocbaseline}
                    };
                }
                \visible<13>{
                    \node[] at (-2.75, -2.3) {
                        \usebox{\rocauc}
                    };
                }
                \visible<14>{
                    \node[] at (-2.75, -2.3) {
                        \usebox{\rocrandom}
                    };
                }
                \visible<15>{
                    \node[] at (-2.75, -2.3) {
                        \usebox{\rocperfect}
                    };
                }
            \end{tikzpicture}
        }
        \only<16>{
            \vspace{1.8cm}
            \textbf{Area under the receiver operating characteristic curve (AUC/AUROC)}
            \begin{itemize}
                \item A performance metric that does not rely on a correct classification threshold
                \item Measures whether the predictions are ranked correctly (e.g. patients have a higher prediction than controls)
                \item \textbf{Handles class imbalance (relatively well)} and is commonly reported in the literature
            \end{itemize}
        }
    \end{frame}

    \begin{frame}{Loss functions and performance metrics: Summary}
        \only<1>{
            \textbf{Performance metrics and loss functions measure the performance of a predictive model}\\[-0cm]
            \begin{itemize}
                \item There is a range of alternatives that can be used, each capturing a different aspect of a model's performance
                \item It is good practice to report more than one metric
                \item For regression:
                \begin{itemize}
                    \item MSE is a common loss function with nice mathematical properties.
                    \item MAE is an intuitive performance metric
                \end{itemize}
                \item For classification:
                \begin{itemize}
                    \item Log-loss is the most common loss function for probabilistic classifiers
                    \item AUC is a widely used metric that is easy to interpret, handles class imbalance (to some degree), and is not reliant on the choice of classification threshold
                \end{itemize}
            \end{itemize}
        }
        \only<2>{
            \centering
            \tiny{\url{http://localhost:8889/notebooks/notebooks\%2FClassification\%20metrics.ipynb}}
        }
    \end{frame}

    \section{Strategies for model evaluation}

    \begin{frame}{Model evaluation: Rationale}
        \only<1>{
            \textbf{\underline{Statistical inference:}}\\
            Goal: In-sample quantification
            \vspace{0.7cm}\\
            \textbf{\underline{Predictive modelling:}}\\
            Goal: Out-of-sample generalization
        }
        \only<2>{
            \centering
            How can we test how good our model is on \textbf{unseen data} and \textbf{be certain that performance holds if we present even more new data}
        }
    \end{frame}


    \begin{frame}{Model evaluation: Validation set} % Performance
        \centering
        \begin{tikzpicture}
            \node[] at (-4, 1) {};
            \node[] at (4, -4.5) {};
            \visible<1-5>{
                \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};
            }

            \visible<2-5,7-9>{
                \node[minimum height=0.5cm, minimum width=6cm, draw=black, fill=green!20, anchor=west, label=below:\footnotesize{Training}] (train) at (full.west) {};
                \node[minimum height=0.5cm, minimum width=1.5cm, draw=black, fill=blue!20, anchor=east, label=below:\footnotesize{Validation}] (val) at (full.east) {};
            }

            \visible<3-5,7-9>{
                \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (model) at ($ (train) - (0, 2.5) $) {Model\\fitting};
                \draw[->] ($ (train.south) - (0, 0.5) $) -- (model.north);
            }

            \visible<4-5,7-9>{
                \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (eval) at ($ (val) - (0, 2.5) $) {Evaluation};
                \draw[->] ($ (val.south) - (0, 0.5) $) -- (eval.north);
                \draw[->] (model.east) -- (eval.west) node [midway, above, sloped] {\scriptsize{Model}};
            }

            \visible<5,7-9>{
                \node[align=center, font=\small\linespread{0.9}\selectfont] (score) at ($ (eval) - (0, 1.5) $) {Predictive\\performance};
                \draw[->] ($ (eval.south) - (0, 00) $) -- (score.north);
            }
            \visible<6>{
                \node[text width=11cm] at (0, -1.75) {
                    In the validation set approach we split the dataset into two subsets (commonly $\sim$80\%/20\%), use the first for training the model and the second to test its performance.
                    \begin{itemize}
                        \item[\textcolor{green}{+}] Accurate estimate of out-of-sample error
                        \item[\textcolor{green}{+}] Simple
                        \item[\textcolor{red}{-}] Variable results depending on the exact split
                        \item[\textcolor{red}{-}] Only uses a subset of data for training models
                        \item[\textcolor{red}{-}] Gives a point estimate of the error, without confidence intervals
                    \end{itemize}
                };
            }
            \visible<7-9>{
                \node[align=center, font=\small\linespread{0.9}\selectfont] (trainscore) at ($ (model) - (0, 1.5) $) {Training\\performance};
                \draw[->] ($ (model.south) - (0, 00) $) -- (trainscore.north);
            }
            \visible<8-9>{
                \node[] at ($ (trainscore.east)!0.5!(score.west) $) {\textcolor{red}{$\neq$}};
            }
            \visible<9>{
                \node[anchor=west, align=center, font=\small\linespread{0.9}\selectfont] (traincharacteristics) at ($ (full.west) + (0, 1) $) {Males\\>60 years};
                \node[anchor=east, align=center, font=\small\linespread{0.9}\selectfont] (valcharacteristics) at ($ (full.east) + (0, 1) $) {Females\\<40 years};

                \draw[->, densely dotted] (traincharacteristics.south) -- ($ (traincharacteristics.south) - (0, 0.3) $);
                \draw[->, densely dotted] (valcharacteristics.south) -- ($ (valcharacteristics.south) - (0, 0.3) $);
            }

        \end{tikzpicture}
    \end{frame}

    \begin{frame}{Model evaluation: Stratification} % Definition
        \textbf{\underline{Stratification:}}\\
        Ensuring all folds of the dataset are similar with respect to some given characteristics.
    \end{frame}

    \begin{frame}{Model evaluation: Stratification} % Dataset
        \only<1-6>{
            \centering
            \begin{tikzpicture}
                \node[] at (-5, 1) {};
                \node[] at (5, -6) {};

                \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};

                \visible<1-2>{
                    \PythonInputNode{1}{(-3.5, -2.5)}{pythonnode}{7cm}{8}{
                        df = ...^^J
                        ^^J
                        ^^J
                        ^^J
                        ^^J
                        ^^J
                    }
                }
                \visible<2-3>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!40, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!70, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!50, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!30, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!80, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!80, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!90, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!75, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!85, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!75, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!50, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!65, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!45, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!45, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!95, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!25, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!40, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!45, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!15, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<2-4>{
                    \node[draw=black, fill=blue!50] (malelabel) at ($ (full.east) - (2.3, 1) $) {};
                    \node[anchor=west] at (malelabel.east) {\footnotesize{Male}};
                    \node[anchor=north, draw=black, fill=red!50] (femalelabel) at ($ (malelabel.south) - (0, 0.1) $) {};
                    \node[anchor=west] at (femalelabel.east) {\footnotesize{Female}};

                    \node[anchor=north, draw=black, shading=vertical, top color=black, bottom color=white, minimum height=0.5825cm] (agelabel) at ($ (malelabel.north) + (1.5, 0) $) {};
                    \node[anchor=west] at (agelabel.east) {\footnotesize{Age}};
                }
                \visible<3>{
                    \PythonInputNode{1}{(-3.5, -2.5)}{pythonnode}{7cm}{8}{
                        df = ...^^J
                        ^^J
                        train = df.iloc[:int(len(df) * 0.8)]^^J
                        validation = df.iloc[int(len(df) * 0.8):]^^J
                        ^^J
                        ^^J
                    }
                }
                \visible<3,6>{
                    \node[minimum height=0.5cm, minimum width=6cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Training}] (train) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=1.5cm, draw=none, fill=none, anchor=east, label=below:\footnotesize{Validation}] (val) at (full.east) {};
                }
                \visible<4>{
                    \PythonInputNode{1}{(-3.5, -2.5)}{pythonnode}{7cm}{8}{
                        df = ...^^J
                        df = df.sort_values(['sex', 'age'])^^J
                        ^^J
                        ^^J
                        ^^J
                        ^^J
                    }
                }
                \visible<4-5>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!15, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!25, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!30, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!40, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!45, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!40, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!50, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!45, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!70, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!45, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!75, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!50, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!75, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!65, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!80, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!80, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!85, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!90, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!95, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<5>{
                    \draw[->, red] ($ (p1.north) + (0, 0.5) $) -- (p1);
                    \draw[->, red] ($ (p6.north) + (0, 0.5) $) -- (p6);
                    \draw[->, red] ($ (p11.north) + (0, 0.5) $) -- (p11);
                    \draw[->, red] ($ (p16.north) + (0, 0.5) $) -- (p16);
                }
                \visible<5-6>{
                    \PythonInputNode{1}{(-3.5, -2.5)}{pythonnode}{7cm}{8}{
                        df = ...^^J
                        df = df.sort_values(['sex', 'age'])^^J
                        ^^J
                        df['fold'] = np.arange(len(df)) \% (1 / 0.2)^^J
                        train = df[df['fold'] != 0]^^J
                        val = df[df['fold'] == 0]^^J
                    }
                }
                \visible<6>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!25, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!30, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!40, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!40, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!50, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!45, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!70, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!75, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!50, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!75, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!65, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!80, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!85, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!90, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!95, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!15, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!45, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!45, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!80, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
            \end{tikzpicture}
        }
        \only<7>{
            \textbf{\underline{Stratification:}}\\
            Ensuring all folds of the dataset are similar with respect to some given characteristics.
            \begin{itemize}
                \item Helps alleviate the risk of training performance $\gg$ validation performance
                \item \textbf{Always} stratify on target variable first
                \item Also good idea to stratify on other core characteristics, e.g. sex and age
            \end{itemize}
            \vspace{0.3cm}
            \begin{tikzpicture}
                \PythonInputNode{1}{(0, 0)}{pythonnode}{10cm}{8}{
                    from sklearn.model_selection import train_test_split
                }

                \RInputNode{(0, -0.8)}{rnode}{10cm}{8}{
                    library(splitstackshape)^^J
                    stratified(data, columns, split)
                }
            \end{tikzpicture}
        }
    \end{frame}

    \begin{frame}{Model evaluation: Leave-one-out cross-validation}
        \only<1-8>{
            \centering
            \begin{tikzpicture}
                \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};

                \visible<1>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<2-8>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<2-3>{
                    \node[minimum height=0.5cm, minimum width=7.125cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Training}] (train) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=none, fill=none, anchor=east, label=below:\footnotesize{Validation}] (val) at (full.east) {};
                }
                \visible<3>{
                    \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (model) at ($ (train) - (0, 2.5) $) {Model\\fitting};
                    \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (eval) at ($ (val) - (0, 2.5) $) {Evaluation};
                    \node[align=center, font=\small\linespread{0.9}\selectfont] (score) at ($ (eval) - (0, 1.5) $) {Error};

                    \draw[->] ($ (train.south) - (0, 0.5) $) -- (model.north);
                    \draw[->] ($ (val.south) - (0, 0.5) $) -- (eval.north);

                    \draw[->] ($ (eval.south) - (0, 00) $) -- (score.north);

                    \draw[->] (model.east) -- (eval.west) node [midway, above, sloped] {\scriptsize{Model}};
                }
                \visible<4-8>{
                    \node[anchor=west] (error1) at ($ (full.east) + (0.5, 0) $) {Error};
                    \draw[->] (full.east) -- (error1.west);
                }
                \visible<5-8>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full2) at (0, -1) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p21) at (full2.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p22) at (p21.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p23) at (p22.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p24) at (p23.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p25) at (p24.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p26) at (p25.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p27) at (p26.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p28) at (p27.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p29) at (p28.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p210) at (p29.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p211) at (p210.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p212) at (p211.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p213) at (p212.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p214) at (p213.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p215) at (p214.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p216) at (p215.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p217) at (p216.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p218) at (p217.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p219) at (p218.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p220) at (p219.east) {};

                    \node[anchor=west] (error2) at ($ (full2.east) + (0.5, 0) $) {Error};
                    \draw[->] (full2.east) -- (error2.west);
                }
                \visible<6-8>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full3) at (0, -2) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p31) at (full3.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p32) at (p31.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p33) at (p32.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p34) at (p33.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p35) at (p34.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p36) at (p35.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p37) at (p36.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p38) at (p37.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p39) at (p38.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p310) at (p39.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p311) at (p310.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p312) at (p311.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p313) at (p312.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p314) at (p313.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p315) at (p314.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p316) at (p315.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p317) at (p316.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p318) at (p317.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p319) at (p318.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p320) at (p319.east) {};

                    \node[anchor=west] (error3) at ($ (full3.east) + (0.5, 0) $) {Error};
                    \draw[->] (full3.east) -- (error3.west);
                }
                \visible<7-8>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (fulln) at (0, -4) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn1) at (fulln.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn2) at (pn1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn3) at (pn2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn4) at (pn3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn5) at (pn4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn6) at (pn5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn7) at (pn6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn8) at (pn7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn9) at (pn8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn10) at (pn9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn11) at (pn10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn12) at (pn11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn13) at (pn12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn14) at (pn13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn15) at (pn14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn16) at (pn15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn17) at (pn16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn18) at (pn17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn19) at (pn18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn20) at (pn19.east) {};

                    \node[anchor=west] (errorn) at ($ (fulln.east) + (0.5, 0) $) {Error};
                    \draw[->] (fulln.east) -- (errorn.west);

                    \node[rotate=90] at (0, -3) {\LARGE{\ldots}};
                }
                \visible<8>{
                    \node[anchor=north] at (errorn.south) {\textcolor{red}{Average}};
                    \draw[red, dashed] (error1.north east) rectangle (errorn.south west);
                }
            \end{tikzpicture}
        }
        \only<9>{
            Fits $n$ models for $n$ datapoints, each time leaving a single datapoint out for testing.
            \begin{itemize}
                \item[\textcolor{green}{+}] Uses all data to train models
                \item[\textcolor{green}{+}] Not dependent on arbitrary data splits
                \item[\textcolor{green}{+}] Unbiased (with regards to the full dataset)
                \item[\textcolor{red}{-}] Computationally expensive
                \item[\textcolor{red}{-}] Effectively gives a point estimate of the error
                \item[\textcolor{red}{-}] All models are going to be trained on $> 99$\% overlapping data \\ \rightarrow{ }highly correlated
            \end{itemize}
        }
    \end{frame}

    \begin{frame}{Model evaluation: Cross-validation}
        \only<1-9>{
            \centering
            \begin{tikzpicture}

                \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};

                \visible<1>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<2-9>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<2-3>{
                    \node[minimum height=0.5cm, minimum width=6cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Training}] (train) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=1.5cm, draw=none, fill=none, anchor=east, label=below:\footnotesize{Validation}] (val) at (full.east) {};
                }
                \visible<3>{
                    \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (model) at ($ (train) - (0, 2.5) $) {Model\\fitting};
                    \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (eval) at ($ (val) - (0, 2.5) $) {Evaluation};
                    \node[align=center, font=\small\linespread{0.9}\selectfont] (score) at ($ (eval) - (0, 1.5) $) {Error};

                    \draw[->] ($ (train.south) - (0, 0.5) $) -- (model.north);
                    \draw[->] ($ (val.south) - (0, 0.5) $) -- (eval.north);

                    \draw[->] ($ (eval.south) - (0, 00) $) -- (score.north);

                    \draw[->] (model.east) -- (eval.west) node [midway, above, sloped] {\scriptsize{Model}};
                }
                \visible<4-9>{
                    \node[anchor=west] (error1) at ($ (full.east) + (0.5, 0) $) {Error};
                    \draw[->] (full.east) -- (error1.west);
                }
                \visible<5-9>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full2) at (0, -1) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p21) at (full2.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p22) at (p21.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p23) at (p22.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p24) at (p23.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p25) at (p24.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p26) at (p25.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p27) at (p26.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p28) at (p27.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p29) at (p28.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p210) at (p29.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p211) at (p210.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p212) at (p211.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p213) at (p212.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p214) at (p213.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p215) at (p214.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p216) at (p215.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p217) at (p216.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p218) at (p217.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p219) at (p218.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p220) at (p219.east) {};

                    \node[anchor=west] (error2) at ($ (full2.east) + (0.5, 0) $) {Error};
                    \draw[->] (full2.east) -- (error2.west);
                }

                \visible<6-9>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full3) at (0, -2) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p31) at (full3.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p32) at (p31.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p33) at (p32.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p34) at (p33.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p35) at (p34.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p36) at (p35.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p37) at (p36.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p38) at (p37.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p39) at (p38.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p310) at (p39.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p311) at (p310.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p312) at (p311.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p313) at (p312.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p314) at (p313.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p315) at (p314.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p316) at (p315.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p317) at (p316.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p318) at (p317.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p319) at (p318.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p320) at (p319.east) {};

                    \node[anchor=west] (error3) at ($ (full3.east) + (0.5, 0) $) {Error};
                    \draw[->] (full3.east) -- (error3.west);
                }
                \visible<7-9>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full4) at (0, -3) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p41) at (full4.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p42) at (p41.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p43) at (p42.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p44) at (p43.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p45) at (p44.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p46) at (p45.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p47) at (p46.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p48) at (p47.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p49) at (p48.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p410) at (p49.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p411) at (p410.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p412) at (p411.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p413) at (p412.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p414) at (p413.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p415) at (p414.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p416) at (p415.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p417) at (p416.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p418) at (p417.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p419) at (p418.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p420) at (p419.east) {};

                    \node[anchor=west] (error4) at ($ (full4.east) + (0.5, 0) $) {Error};
                    \draw[->] (full4.east) -- (error4.west);
                }
                \visible<8-9>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full5) at (0, -4) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p51) at (full5.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p52) at (p51.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p53) at (p52.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p54) at (p53.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p55) at (p54.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p56) at (p55.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p57) at (p56.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p58) at (p57.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p59) at (p58.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p510) at (p59.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p511) at (p510.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p512) at (p511.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p513) at (p512.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p514) at (p513.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p515) at (p514.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p516) at (p515.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p517) at (p516.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p518) at (p517.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p519) at (p518.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p520) at (p519.east) {};

                    \node[anchor=west] (error5) at ($ (full5.east) + (0.5, 0) $) {Error};
                    \draw[->] (full5.east) -- (error5.west);
                }
                \visible<9>{
                    \draw[red, dashed] (error1.north east) rectangle (error5.south west);
                    \node[anchor=north] at (error5.south) {\textcolor{red}{Average}};
                }
            \end{tikzpicture}
        }
        \only<10>{
            Fits $k$ (usually $k \in \{5, 10\}$) models for $n > k$ datapoints, each leaving $n/k$ datapoints for out-of-sample testing.
            \begin{itemize}
                \item[\textcolor{green}{+}] Uses all data to train models
                \item[\textcolor{green}{+}] Yields multiple estimates of out-of-sample error
                \item[\textcolor{red}{-}] Different choices of $k$ (and exact splits) yields different results
                \item[\textcolor{red}{-}] \textbf{No longer a single model from which information (e.g. parameter estimates and p-values) can be derived}
            \end{itemize}
        }
    \end{frame}

    \begin{frame}{Model evaluation: Bootstrapping}
        \only<1-12>{
            \begin{tikzpicture}
                \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};

                \visible<1-5>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \visible<1-3>{
                        \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    }
                    \visible<4->{
                        \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    }
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \visible<1>{
                        \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    }
                    \visible<2-4>{
                        \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    }
                    \visible<5>{
                        \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {\footnotesize{2}};
                    }
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \visible<1-2>{
                        \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    }
                    \visible<3->{
                        \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    }
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<2-8>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs1) at ($ (full.west) - (0.85, 1) $) {};
                }
                \visible<3-8>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs2) at (bs1.east) {};
                }
                \visible<4-8>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs3) at (bs2.east) {};
                }
                \visible<5-8>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs4) at (bs3.east) {};
                }
                \visible<6->{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {\footnotesize{3}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {\footnotesize{2}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {\footnotesize{2}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<6-8>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs5) at (bs4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs6) at (bs5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs7) at (bs6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs8) at (bs7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs9) at (bs8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs10) at (bs9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs11) at (bs10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs12) at (bs11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs13) at (bs12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs14) at (bs13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs15) at (bs14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (bs16) at (bs15.east) {};

                    \node[] (train) at ($ (bs8.east) - (0, 0.5)$) {\footnotesize{Training}};
                }
                \visible<7->{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<7-8>{
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv1) at ($ (bs16.east) + (0.2, 0) $) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv2) at (bv1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv3) at (bv2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv4) at (bv3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv5) at (bv4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv6) at (bv5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv7) at (bv6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (bv8) at (bv7.east) {};

                    \node[] (train) at ($ (bv4.east) - (0, 0.5)$) {\footnotesize{Validation}};
                }
                \visible<8>{
                    \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (model) at ($ (bs8.east) - (0, 2.5) $) {Model\\fitting};
                    \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (eval) at ($ (bv4.east) - (0, 2.5) $) {Evaluation};
                    \node[align=center, font=\small\linespread{0.9}\selectfont] (score) at ($ (eval) - (0, 1.5) $) {Error};

                    \draw[->] ($ (bs8.south east) - (0, 0.5) $) -- (model.north);
                    \draw[->] ($ (bv4.south east) - (0, 0.5) $) -- (eval.north);

                    \draw[->] ($ (eval.south) - (0, 00) $) -- (score.north);

                    \draw[->] (model.east) -- (eval.west) node [midway, above, sloped] {\scriptsize{Model}};
                }
                \visible<9->{
                    \node[anchor=west] (error) at ($ (full.east) + (0.5, 0) $) {Error};
                    \draw[->] (full.east) -- (error.west);
                }
                \visible<10->{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full2) at (0, -1) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p21) at (full2.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p22) at (p21.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p23) at (p22.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p24) at (p23.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p25) at (p24.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p26) at (p25.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p27) at (p26.east) {\footnotesize{2}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p28) at (p27.east) {\footnotesize{2}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p29) at (p28.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p210) at (p29.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p211) at (p210.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p212) at (p211.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p213) at (p212.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p214) at (p213.east) {\footnotesize{2}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p215) at (p214.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p216) at (p215.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p217) at (p216.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p218) at (p217.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p219) at (p218.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p220) at (p219.east) {\footnotesize{2}};

                    \node[anchor=west] (error2) at ($ (full2.east) + (0.5, 0) $) {Error};
                    \draw[->] (full2.east) -- (error2.west);
                }
                \visible<11->{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (fulln) at (0, -3) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn1) at (fulln.west) {\footnotesize{2}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn2) at (pn1.east) {\footnotesize{3}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn3) at (pn2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn4) at (pn3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn5) at (pn4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn6) at (pn5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn7) at (pn6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn8) at (pn7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn9) at (pn8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn10) at (pn9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn11) at (pn10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn12) at (pn11.east) {\footnotesize{3}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn13) at (pn12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn14) at (pn13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn15) at (pn14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn16) at (pn15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn17) at (pn16.east) {\footnotesize{2}};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn18) at (pn17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn19) at (pn18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (pn20) at (pn19.east) {};

                    \node[anchor=west] (errorn) at ($ (fulln.east) + (0.5, 0) $) {Error};
                    \draw[->] (fulln.east) -- (errorn.west);

                    \node[] at (0, -2) {\ldots x1000};
                }
                \visible<12>{
                    \draw[red, dashed] (error.north west) rectangle (errorn.south east);

                    \node[anchor=north] at (errorn.south) {\textcolor{red}{Average}};
                }
            \end{tikzpicture}
        }
        \only<13>{
            Fits $b$ models with $m$ datapoints (typically $m < n$), sampled from the original dataset \textbf{with replacement}.
            \begin{itemize}
                \item[\textcolor{green}{+}] Uses all data to train models
                \item[\textcolor{green}{+}] Provides a dense distribution of model performances
                \item[\textcolor{green}{+}] \textbf{Versatile: Can be used for other things, e.g. getting a confidence interval for model parameters}
                \item[\textcolor{red}{-}] Different choices of $b$ (and exact splits) yields different results
            \end{itemize}
        }
        \only<14>{
            \centering
            \begin{tikzpicture}
                \node[inner sep=0pt, draw=black] {
                    \includegraphics[width=10cm]{data/parameter.png}
                };
            \end{tikzpicture}
        }
    \end{frame}

    \begin{frame}{Model evaluation: Comparison}
        \only<1>{
            \textbf{Why do we want to evaluate our model?}
            \begin{enumerate}
                \item We want to show that our model is better than random guessing
                \item We want to show that our model is better than another model
            \end{enumerate}
        }
        \only<2-18>{
            \begin{tikzpicture}
                \node[] at (-5, 3) {};
                \node[] at (5, -3) {};
                \visible<2-3,5-10,16-20>{
                    \draw[<->] (-4, 0) -- (4, 0);
                    \node[anchor=west] at (4, 0) {Good};
                    \node[anchor=east] at (-4, 0) {Bad};
                }
                \visible<2-3,5-6,9-10,16-17>{
                    \node[circle, inner sep=3.5pt, draw=black, fill=orange!50, label=below:\small{Ours}] at (1, 0) {};
                }
                \visible<7-8,18>{
                    \node[anchor=north] at (1, -0.18) {\small{Ours}};
                }
                \visible<2-3,5-9>{
                    \node[circle, inner sep=3.5pt, draw=black, fill=purple!50, label=below:\small{Baseline}] at (-1, 0) {};
                }
                \visible<10,16-20>{
                    \node[anchor=north] at (-1, -0.18) {\small{Baseline}};
                }
                \visible<3>{
                    \draw[<->, red, dashed] (-4, 0.7) -- (4, 0.7);
                    \node[red, anchor=south] at (0, 0.7) {AUC};
                    \draw[red] (1, 0.6) -- (1, 0.8);
                    \draw[red] (-1, 0.6) -- (-1, 0.8);
                    \node[font=\small, anchor=south, red] at (1, 0.8) {0.7};
                    \node[font=\small, anchor=south, red] at (-1, 0.8) {0.5};
                }
                \visible<4>{
                    \node[font=\scriptsize\selectfont] at (0, 0) {
                        \url{http://localhost:8890/notebooks/notebooks\%2FModel\%20variability.ipynb}
                    };
                }
                \visible<5>{
                    \node[align=center] at (0, -2) {There is going to be variability in our\\model's performance (and possibly the baseline).\\ \textbf{Is our model significantly better?}};
                }
                \visible<6-8>{
                    \node[align=center] at (0, -2) {\underline{Approach 1}:\\Is the mean of the distribution of performances from our\\model (with regards to variability that is \textbf{unrelated} to efficacy)\\significantly higher than the point-estimate baseline?};
                }
                \visible<7-8,18>{
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (0, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (2, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (1.2, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (0.75, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (0.45, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (1.3, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (0.05, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (0.15, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=orange!50] at (1.8, 0) {};
                }
                \visible<8,18>{
                    \fill[orange!50, opacity=0.25] plot[smooth, tension=0.7] coordinates {(-0.2,0) (0.0667,0.002) (0.3334,0.124) (0.6,0.916) (0.8667,1.365) (1.1334,1.365) (1.4,0.916) (1.6667,0.124) (1.9334,0.002) (2.2,0)} -- (2.2,0) -- (-0.2,0) -- cycle;
                    \draw plot[smooth, tension=0.7] coordinates {(-0.2,0) (0.0667,0.002) (0.3334,0.124) (0.6,0.916) (0.8667,1.365) (1.1334,1.365) (1.4,0.916) (1.6667,0.124) (1.9334,0.002) (2.2,0)};
                }
                \visible<9-10,16-17>{
                    \node[align=center] at (0, -2) {\underline{Approach 2}:\\Is the point-estimate performance of our model significantly\\higher than the mean of the baseline distribution?};
                }
                \visible<10>{
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-2, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (0, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-1.25, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.8, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-1.35, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.85, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-1.5, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.5, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.2, 0) {};
                }
                \visible<11-15>{
                    \node[draw=black, dashed, align=center] (pipeline) at (3, 0) {Modelling\\pipeline};

                    \visible<11>{
                        \node (error) at (5, 0) {Error};
                    }
                    \visible<11-12>{
                        \node[inner sep=0pt] (data) at (-2, 0) {
                            \begin{tabular}{|c|c|c|c|}
                                \hline
                                \textbf{Age}&\textbf{Sex}&\textbf{Feature}&\textbf{Outcome}\\
                                \hline
                                25 & Male   &  0.53 & 1 \\
                                38 & Female & -0.76 & 1 \\
                                45 & Male   &  0.89 & 1 \\
                                33 & Female & -0.21 & 1 \\
                                29 & Male   &  0.12 & 1 \\
                                41 & Female & -0.68 & 0 \\
                                56 & Male   &  0.45 & 0 \\
                                52 & Female & -0.32 & 0 \\
                                31 & Male   &  0.91 & 0 \\
                                48 & Female & -0.15 & 0 \\
                                \hline
                            \end{tabular}
                        };
                    }
                    \visible<12>{
                        \node (error) at (5, 0) {0.70};
                    }
                    \visible<13>{
                        \node[inner sep=0pt] (data) at (-2, 0) {
                            \begin{tabular}{|c|c|c|c|}
                                \hline
                                \textbf{Age}&\textbf{Sex}&\textbf{Feature}&\textbf{Outcome}\\
                                \hline
                                25 & Male   &  0.53 & \textcolor{red}{1} \\
                                38 & Female & -0.76 & \textcolor{red}{0} \\
                                45 & Male   &  0.89 & \textcolor{red}{1} \\
                                33 & Female & -0.21 & \textcolor{red}{0} \\
                                29 & Male   &  0.12 & \textcolor{red}{1} \\
                                41 & Female & -0.68 & \textcolor{red}{0} \\
                                56 & Male   &  0.45 & \textcolor{red}{1} \\
                                52 & Female & -0.32 & \textcolor{red}{0} \\
                                31 & Male   &  0.91 & \textcolor{red}{1} \\
                                48 & Female & -0.15 & \textcolor{red}{0} \\
                                \hline
                            \end{tabular}
                        };
                        \node (error) at (5, 0) {\textcolor{red}{0.50}};
                    }
                    \visible<14>{
                        \node[inner sep=0pt] (data) at (-2, 0) {
                            \begin{tabular}{|c|c|c|c|}
                                \hline
                                \textbf{Age}&\textbf{Sex}&\textbf{Feature}&\textbf{Outcome}\\
                                \hline
                                25 & Male   &  0.53 & \textcolor{red}{0} \\
                                38 & Female & -0.76 & \textcolor{red}{0} \\
                                45 & Male   &  0.89 & \textcolor{red}{0} \\
                                33 & Female & -0.21 & \textcolor{red}{0} \\
                                29 & Male   &  0.12 & \textcolor{red}{0} \\
                                41 & Female & -0.68 & \textcolor{red}{1} \\
                                56 & Male   &  0.45 & \textcolor{red}{1} \\
                                52 & Female & -0.32 & \textcolor{red}{1} \\
                                31 & Male   &  0.91 & \textcolor{red}{1} \\
                                48 & Female & -0.15 & \textcolor{red}{1} \\
                                \hline
                            \end{tabular}
                        };

                        \node[align=center] (error) at (5, 0) {\textcolor{red}{0.50} \\ \textcolor{red}{0.45}};
                    }
                    \visible<15>{
                        \node[inner sep=0pt] (data) at (-2, 0) {
                            \begin{tabular}{|c|c|c|c|}
                                \hline
                                \textbf{Age}&\textbf{Sex}&\textbf{Feature}&\textbf{Outcome}\\
                                \hline
                                25 & Male   &  0.53 & \textcolor{red}{0} \\
                                38 & Female & -0.76 & \textcolor{red}{1} \\
                                45 & Male   &  0.89 & \textcolor{red}{0} \\
                                33 & Female & -0.21 & \textcolor{red}{0} \\
                                29 & Male   &  0.12 & \textcolor{red}{1} \\
                                41 & Female & -0.68 & \textcolor{red}{1} \\
                                56 & Male   &  0.45 & \textcolor{red}{0} \\
                                52 & Female & -0.32 & \textcolor{red}{0} \\
                                31 & Male   &  0.91 & \textcolor{red}{1} \\
                                48 & Female & -0.15 & \textcolor{red}{1} \\
                                \hline
                            \end{tabular}
                        };

                        \node[align=center] (error) at (5, 0) {\textcolor{red}{0.50} \\ \textcolor{red}{0.45} \\ \textcolor{red}{0.55}};
                    }

                    \draw[->] (data) -- (pipeline);
                    \draw[->] (pipeline) -- (error);
                }
                \visible<16-18>{
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-2, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (0, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-1.25, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.8, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-1.35, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.85, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-1.5, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.5, 0) {};
                    \node[circle, inner sep=2.5pt, draw=black, fill=purple!50] at (-0.2, 0) {};
                }
                \visible<17-18>{
                    \fill[purple!50, opacity=0.25] plot[smooth, tension=0.7] coordinates {(-2.2,0) (-1.9333,0.002) (-1.6666,0.124) (-1.4,0.916) (-1.1333,1.365) (-0.8666,1.365) (-0.6,0.916) (-0.3333,0.124) (-0.0666,0.002) (0.2,0)} -- (2.2,0) -- (-0.2,0) -- cycle;
                    \draw plot[smooth, tension=0.7] coordinates {(-2.2,0) (-1.9333,0.002) (-1.6666,0.124) (-1.4,0.916) (-1.1333,1.365) (-0.8666,1.365) (-0.6,0.916) (-0.3333,0.124) (-0.0666,0.002) (0.2,0)};
                }
                \visible<18>{
                    \node[align=center] at (0, -2) {\underline{Approach 3}:\\Is the mean of the distribution of performances\\from our model significantly higher than the mean\\of the distribution of baseline performances?};
                }
            \end{tikzpicture}
        }
        \only<19>{
            \begin{center}
                \begin{tabular}{|c|c|c|}
                    \hline
                    \textbf{Fold}&\textbf{Ours}&\textbf{Baseline}\\
                    \hline
                    1 & 0.75 & 0.71 \\
                    2 & 0.62 & 0.55 \\
                    3 & 0.58 & 0.57 \\
                    4 & 0.87 & 0.81 \\
                    5 & 0.65 & 0.63 \\
                    6 & 0.98 & 0.97 \\
                    7 & 0.55 & 0.52 \\
                    8 & 0.69 & 0.52 \\
                    9 & 0.91 & 0.85 \\
                    10 & 0.88 & 0.81 \\
                    \hline
                \end{tabular}\\[0.2cm]
                The small gain of our model will disappear in the noise between the folds using a non-paired statistical test. Use a paired test, e.g. Wilcoxon signed-rank test
            \end{center}
        }
    \end{frame}

    \begin{frame}{Model evaluation: Summary}
        \begin{itemize}
            \item Model evaluation should \textbf{always} happen out-of-sample
            \item If n is big ($\geq 10000$), a single train/validation split is often sufficient
            \item For smaller samples, k-fold cross-validation with $5 \leq k \leq 10$ is a good trade-off between bias and variance
            \item The bootstrap is an effective way of getting confidence intervals for model performance \textbf{and parameters}
            \item Cross-validation (or bootstrapping) will produce a distribution of model performances (although caution the correlation)
            \item Permutation testing will produce a distribution of baseline performances
            \item Compare models across folds using Wilcoxon signed-rank test \textbf{(ensure the folds are the same!)}
        \end{itemize}
    \end{frame}

    \section{Model selection and evaluation}

    \begin{frame}[t]{Model selection and evaluation: Rationale}
        \vspace{1cm}
        \begin{itemize}
            \item Model evaluation via cross-validation is sufficient if we want to estimate the out-of-sample error of a \textbf{known model}.
            \item Very often we want to know whether a set of predictors are informative for an outcome \textbf{given the best possible model}.
            \item In that case, we have to both \textbf{choose the best model}, and \textbf{estimate its performance}.
            \item If we choose the model based on regular cross-validation, the performance estimate will (likely) be inflated
            \visible<2>{\item[\rightarrow] We need a more advanced strategy}
         \end{itemize}
    \end{frame}

    \begin{frame}{Model selection and evaluation: Train/validation/test}
        \centering
        \begin{tikzpicture}
            \visible<1>{
                \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
            }
            \visible<2-5>{
                \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};

                \node[minimum height=0.5cm, minimum width=4.5cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Training}] (train) at (full.west) {};
                \node[minimum height=0.5cm, minimum width=1.5cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Validation}] (val) at (train.east) {};
                \node[minimum height=0.5cm, minimum width=1.5cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Test}] (test) at (val.east) {};
            }
            \visible<3-5>{
                \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (model) at ($ (train) - (0, 2.5) $) {Model\\fitting};

                \draw[->] ($ (train.south) - (0, 0.5) $) -- (model.north);
            }
            \visible<4-5>{
                \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (eval) at ($ (val) - (0, 2.5) $) {Model\\selection};

                \draw[->] ($ (val.south) - (0, 0.5) $) -- (eval.north);
                \draw[->] (model.east) -- (eval.west) node [midway, above, sloped] {\scriptsize{Models}};
            }
            \visible<5>{
                \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (testing) at ($ (test) - (0, 2.5) $) {Test};
                \node[align=center, font=\small\linespread{0.9}\selectfont] (score) at ($ (testing) - (0, 1.5) $) {Out-of-sample\\performance};

                \draw[->] ($ (test.south) - (0, 0.5) $) -- (testing.north);
                \draw[->] ($ (testing.south) - (0, 00) $) -- (score.north);
                \draw[->] (eval.east) -- (testing.west) node [midway, above, sloped] {};
            }
        \end{tikzpicture}
    \end{frame}

    \newsavebox{\innercv}
    \sbox{\innercv}{%
        \begin{tikzpicture}[transform canvas={scale=0.3}]
            \node[] at (-4.5, 1) {};
            \node[] at (6.5, -5) {};

            \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full) at (0, 0) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};

            \node[anchor=west] (error1) at ($ (full.east) + (0.5, 0) $) {Error};
            \draw[->] (full.east) -- (error1.west);

            \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full2) at (0, -1) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p21) at (full2.west) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p22) at (p21.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p23) at (p22.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p24) at (p23.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p25) at (p24.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p26) at (p25.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p27) at (p26.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p28) at (p27.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p29) at (p28.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p210) at (p29.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p211) at (p210.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p212) at (p211.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p213) at (p212.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p214) at (p213.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p215) at (p214.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p216) at (p215.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p217) at (p216.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p218) at (p217.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p219) at (p218.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p220) at (p219.east) {};

            \node[anchor=west] (error2) at ($ (full2.east) + (0.5, 0) $) {Error};
            \draw[->] (full2.east) -- (error2.west);

            \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full3) at (0, -2) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p31) at (full3.west) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p32) at (p31.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p33) at (p32.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p34) at (p33.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p35) at (p34.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p36) at (p35.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p37) at (p36.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p38) at (p37.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p39) at (p38.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p310) at (p39.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p311) at (p310.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p312) at (p311.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p313) at (p312.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p314) at (p313.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p315) at (p314.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p316) at (p315.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p317) at (p316.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p318) at (p317.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p319) at (p318.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p320) at (p319.east) {};

            \node[anchor=west] (error3) at ($ (full3.east) + (0.5, 0) $) {Error};
            \draw[->] (full3.east) -- (error3.west);

            \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full4) at (0, -3) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p41) at (full4.west) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p42) at (p41.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p43) at (p42.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p44) at (p43.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p45) at (p44.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p46) at (p45.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p47) at (p46.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p48) at (p47.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p49) at (p48.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p410) at (p49.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p411) at (p410.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p412) at (p411.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p413) at (p412.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p414) at (p413.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p415) at (p414.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p416) at (p415.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p417) at (p416.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p418) at (p417.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p419) at (p418.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p420) at (p419.east) {};

            \node[anchor=west] (error4) at ($ (full4.east) + (0.5, 0) $) {Error};
            \draw[->] (full4.east) -- (error4.west);

            \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full5) at (0, -4) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p51) at (full5.west) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p52) at (p51.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p53) at (p52.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=blue!20, anchor=west, inner sep=0pt, outer sep=0pt] (p54) at (p53.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p55) at (p54.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p56) at (p55.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p57) at (p56.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p58) at (p57.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p59) at (p58.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p510) at (p59.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p511) at (p510.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p512) at (p511.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p513) at (p512.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p514) at (p513.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p515) at (p514.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p516) at (p515.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p517) at (p516.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p518) at (p517.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p519) at (p518.east) {};
            \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=green!20, anchor=west, inner sep=0pt, outer sep=0pt] (p520) at (p519.east) {};

            \node[anchor=west] (error5) at ($ (full5.east) + (0.5, 0) $) {Error};
            \draw[->] (full5.east) -- (error5.west);

            \draw[red, dashed] (error1.north east) rectangle (error5.south west);
            \node[anchor=north] at (error5.south) {\textcolor{red}{Average}};
        \end{tikzpicture}
    }

    \begin{frame}{Model selection and evaluation: Nested cross-validation}
        \only<1-7>{
            \centering
            \begin{tikzpicture}
                \node[] at (-4.5, 1) {};
                \node[] at (6.5, -5) {};

                \only<1>{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=gray!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};
                }
                \visible<2->{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20, label=\small{Dataset}] (full) at (0, 0) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p1) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p2) at (p1.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p3) at (p2.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p4) at (p3.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p5) at (p4.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p6) at (p5.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p7) at (p6.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p8) at (p7.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p9) at (p8.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p10) at (p9.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p11) at (p10.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p12) at (p11.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p13) at (p12.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p14) at (p13.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p15) at (p14.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p16) at (p15.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p17) at (p16.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p18) at (p17.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p19) at (p18.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p20) at (p19.east) {};

                    \node[minimum height=0.5cm, minimum width=6cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Training and validation}] (train) at (full.west) {};
                    \node[minimum height=0.5cm, minimum width=1.5cm, draw=none, fill=none, anchor=west, label=below:\footnotesize{Test}] (test) at (train.east) {};
                }
                \visible<3-4>{
                    \node[] (innercv) at ($ (train.south) - (0, 1.63) $) {
                        \usebox{\innercv}
                    };

                    \draw[->] ($ (train.south) - (0, 0.5) $) -- (innercv.north);
                }
                \visible<4>{
                    \node[draw=black, dashed, align=center, font=\small\linespread{0.9}\selectfont] (testing) at ($ (test) - (0, 2.5) $) {Performance\\evaluation};
                    \node[align=center, font=\small\linespread{0.9}\selectfont] (score) at ($ (testing) - (0, 1.5) $) {Error};

                    \draw[->] ($ (test.south) - (0, 0.5) $) -- (testing.north);
                    \draw[->] (testing.south) -- (score.north);
                    \draw[->] ($ (testing.west) - (1.2, 0) $) -- (testing.west) node [midway, above] {\footnotesize{Model}};
                }
                \visible<5->{
                    \node[align=center, font=\small\linespread{0.9}\selectfont, anchor=west] (error) at ($ (full.east) + (0.5, 0) $) {Error};
                    \draw[->] (full.east) -- (error.west);
                }
                \visible<6->{
                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full2) at (0, -1) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p21) at (full2.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p22) at (p21.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p23) at (p22.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p24) at (p23.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p25) at (p24.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p26) at (p25.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p27) at (p26.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p28) at (p27.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p29) at (p28.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p210) at (p29.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p211) at (p210.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p212) at (p211.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p213) at (p212.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p214) at (p213.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p215) at (p214.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p216) at (p215.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p217) at (p216.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p218) at (p217.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p219) at (p218.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p220) at (p219.east) {};

                    \node[align=center, font=\small\linespread{0.9}\selectfont, anchor=west] (error2) at ($ (full2.east) + (0.5, 0) $) {Error};
                    \draw[->] (full2.east) -- (error2.west);

                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full3) at (0, -2) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p31) at (full3.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p32) at (p31.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p33) at (p32.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p34) at (p33.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p35) at (p34.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p36) at (p35.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p37) at (p36.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p38) at (p37.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p39) at (p38.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p310) at (p39.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p311) at (p310.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p312) at (p311.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p313) at (p312.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p314) at (p313.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p315) at (p314.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p316) at (p315.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p317) at (p316.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p318) at (p317.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p319) at (p318.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p320) at (p319.east) {};

                    \node[align=center, font=\small\linespread{0.9}\selectfont, anchor=west] (error3) at ($ (full3.east) + (0.5, 0) $) {Error};
                    \draw[->] (full3.east) -- (error3.west);

                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full4) at (0, -3) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p41) at (full4.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p42) at (p41.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p43) at (p42.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p44) at (p43.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p45) at (p44.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p46) at (p45.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p47) at (p46.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p48) at (p47.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p49) at (p48.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p410) at (p49.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p411) at (p410.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p412) at (p411.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p413) at (p412.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p414) at (p413.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p415) at (p414.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p416) at (p415.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p417) at (p416.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p418) at (p417.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p419) at (p418.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p420) at (p419.east) {};

                    \node[align=center, font=\small\linespread{0.9}\selectfont, anchor=west] (error4) at ($ (full4.east) + (0.5, 0) $) {Error};
                    \draw[->] (full4.east) -- (error4.west);

                    \node[minimum height=0.5cm, minimum width=7.5cm, draw=black, fill=gray!20] (full5) at (0, -4) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p51) at (full5.west) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p52) at (p51.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p53) at (p52.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, fill=red!20, anchor=west, inner sep=0pt, outer sep=0pt] (p54) at (p53.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p55) at (p54.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p56) at (p55.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p57) at (p56.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p58) at (p57.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p59) at (p58.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p510) at (p59.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p511) at (p510.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p512) at (p511.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p513) at (p512.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p514) at (p513.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p515) at (p514.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p516) at (p515.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p517) at (p516.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p518) at (p517.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p519) at (p518.east) {};
                    \node[minimum height=0.5cm, minimum width=0.375cm, draw=black, anchor=west, inner sep=0pt, outer sep=0pt, shading=axis, left color=green!40, right color=blue!40, shading angle=45] (p520) at (p519.east) {};

                    \node[align=center, font=\small\linespread{0.9}\selectfont, anchor=west] (error5) at ($ (full5.east) + (0.5, 0) $) {Error};
                    \draw[->] (full5.east) -- (error5.west);
                }
                \visible<7>{
                    \draw[red, dashed] (error.north west) rectangle (error5.south east);

                    \node[anchor=north] at (error5.south) {\textcolor{red}{Average}};
                }
            \end{tikzpicture}
        }
        \only<8>{
            Performs $k$ outer cross-validations, each performing $k/k-1$ inner cross validations, and uses the best models from the inner loop to predict in the outer loop.
            \begin{itemize}
                \item[\textcolor{green}{+}] Uses all data to train models
                \item[\textcolor{green}{+}] \textbf{Unbiased estimate of out-of-sample error}
                \item[\textcolor{red}{-}] \textbf{Very} computationally expensive
                \item[\textcolor{red}{-}] We now have either $k$, or $k^2$ models that might behave in different ways
            \end{itemize}
        }
    \end{frame}

    \begin{frame}{Model selection and evaluation: Summary}
        \begin{tikzpicture}
            \node[text width=11cm] at (0, 0) {
                \begin{itemize}
                    \item Whenever a modelling choice is made on the basis of performance in a dataset, \textbf{we have to assume the performance achieved by the chosen model is inflated}
                    \item If n is big ($\geq 10000$), a single train/validation/test split is often sufficient
                    \item When possible, use nested cross-validation to select the best model and estimate the out-of-sample error
                \end{itemize}
            };
            \visible<2>{
                \node[minimum height=1.6cm, minimum width=10.6cm, draw=red, label=above:\Large{\textcolor{red}{!!!!!}}] at (0.1, 1) {};
            }
        \end{tikzpicture}
    \end{frame}
\end{document}
