\documentclass{beamer}

\usepackage{pgfplots}
\usepackage{pgfplotstable}

\usetheme{UiO}

\title{Persontilpasset KI-basert nevrodiagnostikk}
\author{Esten H. Leonardsen}
\date{06.03.2024}

\titlegraphic{
	\centering
	\vspace{7.7cm}
	\includegraphics[width=\logowidth]{data/uio_logo_full.png}
}

\usetikzlibrary{arrows}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{calc}
\usetikzlibrary{fadings}
\usetikzlibrary{fillbetween}
\usetikzlibrary{patterns}
\usetikzlibrary{positioning}
\usetikzlibrary{shapes.arrows}

\newsavebox{\articles}
\sbox{\articles}{
    \begin{tikzpicture}
        \begin{axis}[
            height=7cm,
            width=9cm,
            xmin=1990,
            xmax=2024,
            xtick={1990, 1995, 2000, 2005, 2010, 2015, 2020},
            xticklabels={1990, 1995, 2000, 2005, 2010, 2015, 2020},
            xlabel={År},
            ymin=0,
            ymax=8000,
            ytick={2000, 4000, 6000},
            yticklabels={2000, 4000, 6000},
            ylabel={Antall publikasjoner},
            ylabel style={align=center, font=\small\linespread{0.9}\selectfont, yshift=0.4cm},
            xlabel style={font=\small},
            xtick pos=bottom,
            ytick pos=left,
            ticklabel style={font=\small},
            axis lines=left
        ]
            \addplot[
                cyan,
                very thick
            ] table[
                col sep=comma,
                x=Year,
                y=Count
            ] {data/PubMed_Timeline_Results_by_Year.csv};
        \end{axis}
    \end{tikzpicture}
}

\newsavebox{\dlperformance}
\sbox{\dlperformance}{
    \begin{tikzpicture}
        \begin{axis}[
            height=7cm,
            width=9cm,
            xmin=2012,
            xmax=2023,
            xlabel=År,
            ylabel={Treffsikkerhet (\%)},
            set layers,
            mark layer=axis tick labels,
            xtick pos=bottom,
            ytick pos=left,
            ymin=50,
            ymax=100,
            xtick={2013, 2015, 2017, 2019, 2021, 2023},
            xticklabels={2013, 2015, 2017, 2019, 2021, 2023},
            ytick={50, 60, 70, 80, 90, 100},
            yticklabels={50, 60, 70, 80, 90, 100}
        ]
            \addplot[
                only marks,
                mark=*,
                mark options={fill=cyan},
                mark size=3pt,
                opacity=0.25
            ] table [
                col sep=comma,
                x=year,
                y=accuracy
            ] {data/DL_accuracies.csv};

        \end{axis}
    \end{tikzpicture}
}

\begin{document}
	\begin{frame}
	 	\titlepage
	\end{frame}

    \input{utils/cnn.tex}

    \begin{frame}{KI-revolusjonen(?)}
        \begin{tikzpicture}
            \node[] at (-5.25, 3.25) {};
            \node[] at (5.25, -3.25) {};


            \only<1>{
                \node[] at (0, 0) {
                    KI popularitet
                };
            }
            \only<2>{
                \node[] at (0, 0) {
                    \usebox{\articles}
                };
            }
            \only<3,6,10>{
                \node[] at (0, 0) {
                    \usebox{\cnntraining}
                };
            }
            \only<4>{
                \node[] at (0, 0) {
                    \usebox{\dlperformance}
                };
            }
            \only<5>{
                \node[] at (0, 0) {
                    Sen utrulling
                };
            }
            \only<7>{
                \node[] at (0, 0) {
                    \usebox{\cnnheatmap}
                };
            }
            \only<8-9>{
                \node[inner sep=0pt, label=above:{Kunstig intelligens}] at (-2.5, 0) {
                    \includegraphics[width=4cm]{data/dementia_average.png}
                };
            }
            \only<9>{
                \node[inner sep=0pt, label=above:{Menneskelige forskere}] at (2.5, 0) {
                    \includegraphics[width=4cm]{data/ALE.png}
                };
            }
        \end{tikzpicture}
    \end{frame}

    \begin{frame}{SMEers rolle}
        \begin{tikzpicture}

        \end{tikzpicture}
    \end{frame}
\end{document}
