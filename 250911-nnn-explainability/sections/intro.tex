\newsavebox{\articles}
\sbox{\articles}{
    \begin{tikzpicture}
        \begin{axis}[
            height=6cm,
            width=9cm,
            xmin=1990,
            xmax=2024,
            xtick={1990, 1995, 2000, 2005, 2010, 2015, 2020},
            xticklabels={1990, 1995, 2000, 2005, 2010, 2015, 2020},
            xlabel={Year},
            ymin=0,
            ymax=8000,
            ytick={2000, 4000, 6000},
            yticklabels={2000, 4000, 6000},
            ylabel={Number of publications},
            ylabel style={align=center, font=\small\linespread{0.9}\selectfont, yshift=0.4cm},
            xlabel style={font=\small},
            xtick pos=bottom,
            ytick pos=left,
            ticklabel style={font=\small},
            axis lines=left,
            clip=false
        ]
            \addplot[
                cyan,
                very thick,
                stealth-
            ] table[
                col sep=comma,
                x=Year,
                y=Count
            ] {data/PubMed_Timeline_Results_by_Year.csv};
        \end{axis}
    \end{tikzpicture}
}

\begin{frame}{Do we need explainable AI?}
    \begin{tikzpicture}
        \node[] at (-5.25, 3.5) {};
        \node[] at (5.25, -3.5) {};

        \only<1>{
            \node[inner sep=0pt, draw=black] at (0, 0) {
                \includegraphics[width=10cm]{data/mckinsey.png}
            };
            \node[anchor=south, font=\tiny, text width=10.5cm, align=flush center] at (0, -3.75) {
                McKinsey \& Company, The state of AI: How organizations are rewiring to capture value, \textit{\url{https://www.mckinsey.com/capabilities/quantumblack/our-insights/the-state-of-ai}} (2025)
            };
        }
        \only<2>{
            \node[] at (0, 0) {
                \usebox{\articles}
            };
            \node[anchor=south, font=\tiny, text width=10.5cm, align=flush center] at (0, -3.75) {
                Publications from \url{https://pubmed.ncbi.nlm.nih.gov/} containing "(neurology OR neuroscience OR neuroimaging) AND (ai OR artificial intelligence OR deep learning)"
            };
        }
        \only<3>{
            \node[] at (0, 0) {AI in norwegian health care};
        }
        \only<4>{
            \node[] at (0, 0) {AI medicine ethics};
        }
        \only<5>{
            \node[] at (0, 0) {Medical practitioner statistics};
        }
    \end{tikzpicture}
\end{frame}

\begin{frame}{What is explainable AI?}
    \newcommand{\neuron}[3]{
        \node[circle, draw=black, fill=####2] (####1) at ####3 {};
    }

    \def\hsep{0.7}
    \def\vsep{0.5}
    \def\edgecolour{gray}
    \def\edgeopacity{0.5}
    \def\neuroncolour{gray}

    \begin{tikzpicture}

        \node[] at (-5.25, -3.25) {};
        \node[] at (5.25, 3.25) {};

        \node[
            draw=black,
            fill=babalightblue!50,
            minimum height=2.8cm,
            minimum width=4.3cm,
            label=above:\small{Artificial neural network}
        ] (model) at (0, 2) {};

        \node[anchor=east] (input) at ($ (model.west) - (0.75, 0) $) {
            \only<1-4>{Input}
            \only<5>{4}
            \only<6->{\includegraphics[width=2cm]{data/ladybug.png}}
        };
        \node[anchor=west, align=left] (output) at ($ (model.east) + (0.75, 0) $) {
            \only<1-4>{Output}
            \only<5>{13.5}
            \only<6->{Ladybug}
        };

        \draw[-stealth, line width=2pt] (input) -- (model.west);
        \draw[-stealth, line width=2pt] (model.east) -- (output);

        \neuron{n00}{\neuroncolour}{($ (model) + (-2 * \hsep, -2 * \vsep) $)}
        \neuron{n01}{\neuroncolour}{($ (model) + (-2 * \hsep, -\vsep) $)}
        \neuron{n02}{\neuroncolour}{($ (model) + (-2 * \hsep, 0) $)}
        \neuron{n03}{\neuroncolour}{($ (model) + (-2 * \hsep, \vsep) $)}
        \neuron{n04}{\neuroncolour}{($ (model) + (-2 * \hsep, 2 * \vsep) $)}

        \neuron{n10}{\neuroncolour}{($ (model) + (-\hsep, -1.5 * \vsep) $)}
        \neuron{n11}{\neuroncolour}{($ (model) + (-\hsep, -0.5 * \vsep) $)}
        \neuron{n12}{\neuroncolour}{($ (model) + (-\hsep, 0.5 * \vsep) $)}
        \neuron{n13}{\neuroncolour}{($ (model) + (-\hsep, 1.5 * \vsep) $)}

        \neuron{n20}{\neuroncolour}{($ (model) + (0, -\vsep) $)}
        \neuron{n21}{\neuroncolour}{(model)}
        \neuron{n22}{\neuroncolour}{($ (model) + (0, \vsep) $)}

        \neuron{n30}{\neuroncolour}{($ (model) + (\hsep, -0.5 * \vsep) $)}
        \neuron{n31}{\neuroncolour}{($ (model) + (\hsep, 0.5 * \vsep) $)}

        \neuron{n40}{\neuroncolour}{($ (model) + (2 * \hsep, 0) $)}

        \draw[-stealth, \edgecolour, opacity=\edgeopacity] (model.west) -- (n00);
        \draw[-stealth, \edgecolour, opacity=\edgeopacity] (model.west) -- (n01);
        \draw[-stealth, \edgecolour, opacity=\edgeopacity] (model.west) -- (n02);
        \draw[-stealth, \edgecolour, opacity=\edgeopacity] (model.west) -- (n03);
        \draw[-stealth, \edgecolour, opacity=\edgeopacity] (model.west) -- (n04);

        \foreach \j in {0,...,4} {
            \foreach \k in {0,...,3} {
                \draw[-stealth, \edgecolour, opacity=\edgeopacity] (n0\j) -- (n1\k);
            }
        }
        \foreach \j in {0,...,3} {
            \foreach \k in {0,...,2} {
                \draw[-stealth, \edgecolour, opacity=\edgeopacity] (n1\j) -- (n2\k);
            }
        }
        \foreach \j in {0,...,2} {
            \foreach \k in {0,...,1} {
                \draw[-stealth, \edgecolour, opacity=\edgeopacity] (n2\j) -- (n3\k);
            }
        }
        \foreach \j in {0,...,1} {
            \foreach \k in {0,...,0} {
                \draw[-stealth, \edgecolour, opacity=\edgeopacity] (n3\j) -- (n4\k);
            }
        }

        \only<2->{
            \node[circle, fill=\neuroncolour, minimum size=0.6cm] (an) at ($ (model.south) - (0, 1.65) $) {};
            \node[align=center, font=\small\linespread{0.9}\selectfont] at ($ (an) + (0, 0.8) $) {Artificial\\neuron};

            \node[
                anchor=east,
                alt=<9>{text=red}{}
            ] (x1) at ($ (an) - (1.25, -0.5) $) {
                \only<2>{$x_1$}
                \only<3->{5}
            };
            \node[anchor=east] (x2) at ($ (an) - (1.25, 0) $) {
                \only<2>{$x_2$}
                \only<3->{1}
            };
            \node[anchor=east] (x3) at ($ (an) - (1.25, 0.5) $) {
                \only<2>{$x_3$}
                \only<3->{8}
            };
            \node[anchor=west] (y) at ($ (an) + (1.25, 0) $) {
                \only<2>{$y$}
                \only<3->{11}
            };

            \draw[-stealth] (x1) -- (an);
            \draw[-stealth] (x2) -- (an);
            \draw[-stealth] (x3) -- (an);
            \draw[-stealth] (an) -- (y);
        }

        \only<4,7-9>{
            \node[font=\footnotesize] (equation) at ($ (an.south) - (0, 0.75) $) {max(0, 5*1+1*4+8*0.25)=11};
        }
        \only<8-9>{
            \node[font=\scriptsize, inner sep=1pt, text=red] (term1) at ($ (equation.south) - (0.52, 0.2) $) {5};
            \node[font=\scriptsize, inner sep=1pt, text=red] (term2) at ($ (equation.south) - (-0.03, 0.2) $) {4};
            \node[font=\scriptsize, inner sep=1pt, text=red] (term3) at ($ (equation.south) - (-0.85, 0.2) $) {2};

            \draw[-stealth, red] (term1) -- ($ (term1.north) + (0, 0.2) $);
            \draw[-stealth, red] (term2) --($ (term2.north) + (0, 0.2) $);
            \draw[-stealth, red] (term3) --($ (term3.north) + (0, 0.2) $);
        }

        \draw[-stealth, \edgecolour, opacity=\edgeopacity] (n40) -- (model.east);
    \end{tikzpicture}
\end{frame}